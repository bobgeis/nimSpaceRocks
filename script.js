var framePtr=null,excHandler=0,lastJSError=null;"undefined"==typeof Int8Array&&(Int8Array=Array),"undefined"==typeof Int16Array&&(Int16Array=Array),"undefined"==typeof Int32Array&&(Int32Array=Array),"undefined"==typeof Uint8Array&&(Uint8Array=Array),"undefined"==typeof Uint16Array&&(Uint16Array=Array),"undefined"==typeof Uint32Array&&(Uint32Array=Array),"undefined"==typeof Float32Array&&(Float32Array=Array),"undefined"==typeof Float64Array&&(Float64Array=Array);var NTI290475={size:0,kind:24,base:null,node:null,finalizer:null},NTI290473={size:0,kind:24,base:null,node:null,finalizer:null},NTI290472={size:0,kind:18,base:null,node:null,finalizer:null},NTI290531={size:0,kind:24,base:null,node:null,finalizer:null},NTI290514={size:0,kind:24,base:null,node:null,finalizer:null},NTI351432={size:0,kind:31,base:null,node:null,finalizer:null},NTI354247={size:0,kind:18,base:null,node:null,finalizer:null},NTI179408={size:0,kind:17,base:null,node:null,finalizer:null},NTI179514={size:0,kind:22,base:null,node:null,finalizer:null},NTI176016={size:0,kind:40,base:null,node:null,finalizer:null},NTI179508={size:0,kind:22,base:null,node:null,finalizer:null},NTI179426={size:0,kind:17,base:null,node:null,finalizer:null},NTI179430={size:0,kind:17,base:null,node:null,finalizer:null},NTI179452={size:0,kind:17,base:null,node:null,finalizer:null},NTI268373={size:0,kind:16,base:null,node:null,finalizer:null},NTI266469={size:0,kind:16,base:null,node:null,finalizer:null},NTI266466={size:0,kind:24,base:null,node:null,finalizer:null},NTI266426={size:0,kind:24,base:null,node:null,finalizer:null},NTI266429={size:0,kind:16,base:null,node:null,finalizer:null},NTI271613={size:0,kind:24,base:null,node:null,finalizer:null},NTI284407={size:0,kind:24,base:null,node:null,finalizer:null},NTI306184={size:0,kind:24,base:null,node:null,finalizer:null},NTI284535={size:0,kind:31,base:null,node:null,finalizer:null},NTI284534={size:0,kind:31,base:null,node:null,finalizer:null},NTI284533={size:0,kind:18,base:null,node:null,finalizer:null},NTI295717={size:0,kind:24,base:null,node:null,finalizer:null},NTI295728={size:0,kind:24,base:null,node:null,finalizer:null},NTI297309={size:0,kind:24,base:null,node:null,finalizer:null},NTI179494={size:0,kind:31,base:null,node:null,finalizer:null},NTI179404={size:0,kind:20,base:null,node:null,finalizer:null},NTI417063={size:0,kind:16,base:null,node:null,finalizer:null},NTI417017={size:0,kind:14,base:null,node:null,finalizer:null},NTI242230={size:0,kind:31,base:null,node:null,finalizer:null},NTI417053={size:0,kind:18,base:null,node:null,finalizer:null},NTI417050={size:0,kind:24,base:null,node:null,finalizer:null},NTI417047={size:0,kind:18,base:null,node:null,finalizer:null},NTI282196={size:0,kind:18,base:null,node:null,finalizer:null},NTI282381={size:0,kind:18,base:null,node:null,finalizer:null},NTI278592={size:0,kind:18,base:null,node:null,finalizer:null},NTI277183={size:0,kind:18,base:null,node:null,finalizer:null},NTI274643={size:0,kind:18,base:null,node:null,finalizer:null},NTI274601={size:0,kind:18,base:null,node:null,finalizer:null},NTI274547={size:0,kind:18,base:null,node:null,finalizer:null},NTI271206={size:0,kind:18,base:null,node:null,finalizer:null},NTI270059={size:0,kind:18,base:null,node:null,finalizer:null},NTI279668={size:0,kind:24,base:null,node:null,finalizer:null},NTI279669={size:0,kind:18,base:null,node:null,finalizer:null},NTI279687={size:0,kind:24,base:null,node:null,finalizer:null},NTI279376={size:0,kind:18,base:null,node:null,finalizer:null},NTI279178={size:0,kind:18,base:null,node:null,finalizer:null},NTI279177={size:0,kind:24,base:null,node:null,finalizer:null},NTI279174={size:0,kind:16,base:null,node:null,finalizer:null},NTI284046={size:0,kind:16,base:null,node:null,finalizer:null},NTI284042={size:0,kind:16,base:null,node:null,finalizer:null},NTI284037={size:0,kind:24,base:null,node:null,finalizer:null},NTI281056={size:0,kind:18,base:null,node:null,finalizer:null},NTI281055={size:0,kind:22,base:null,node:null,finalizer:null},NTI279120={size:0,kind:14,base:null,node:null,finalizer:null},NTI279122={size:0,kind:14,base:null,node:null,finalizer:null},NTI279138={size:0,kind:18,base:null,node:null,finalizer:null},NTI279124={size:0,kind:22,base:null,node:null,finalizer:null},NTI284034={size:0,kind:24,base:null,node:null,finalizer:null},NTI277108={size:0,kind:18,base:null,node:null,finalizer:null},NTI277107={size:0,kind:22,base:null,node:null,finalizer:null},NTI284032={size:0,kind:24,base:null,node:null,finalizer:null},NTI276120={size:0,kind:14,base:null,node:null,finalizer:null},NTI276125={size:0,kind:18,base:null,node:null,finalizer:null},NTI276122={size:0,kind:22,base:null,node:null,finalizer:null},NTI284030={size:0,kind:24,base:null,node:null,finalizer:null},NTI275056={size:0,kind:18,base:null,node:null,finalizer:null},NTI275055={size:0,kind:22,base:null,node:null,finalizer:null},NTI274107={size:0,kind:14,base:null,node:null,finalizer:null},NTI274113={size:0,kind:18,base:null,node:null,finalizer:null},NTI274109={size:0,kind:22,base:null,node:null,finalizer:null},NTI284027={size:0,kind:24,base:null,node:null,finalizer:null},NTI284025={size:0,kind:24,base:null,node:null,finalizer:null},NTI273109={size:0,kind:14,base:null,node:null,finalizer:null},NTI273107={size:0,kind:14,base:null,node:null,finalizer:null},NTI273116={size:0,kind:18,base:null,node:null,finalizer:null},NTI273111={size:0,kind:22,base:null,node:null,finalizer:null},NTI284023={size:0,kind:24,base:null,node:null,finalizer:null},NTI271109={size:0,kind:14,base:null,node:null,finalizer:null},NTI271107={size:0,kind:14,base:null,node:null,finalizer:null},NTI271111={size:0,kind:18,base:null,node:null,finalizer:null},NTI284021={size:0,kind:24,base:null,node:null,finalizer:null},NTI270015={size:0,kind:14,base:null,node:null,finalizer:null},NTI270020={size:0,kind:18,base:null,node:null,finalizer:null},NTI270017={size:0,kind:22,base:null,node:null,finalizer:null},NTI284019={size:0,kind:24,base:null,node:null,finalizer:null},NTI176032={size:0,kind:1,base:null,node:null,finalizer:null},NTI278121={size:0,kind:18,base:null,node:null,finalizer:null},NTI278118={size:0,kind:22,base:null,node:null,finalizer:null},NTI284016={size:0,kind:18,base:null,node:null,finalizer:null},NTI284015={size:0,kind:22,base:null,node:null,finalizer:null},NTI417573={size:0,kind:18,base:null,node:null,finalizer:null},NTI417531={size:0,kind:16,base:null,node:null,finalizer:null},NTI417536={size:0,kind:16,base:null,node:null,finalizer:null},NTI176042={size:0,kind:29,base:null,node:null,finalizer:null},NTI289089={size:0,kind:24,base:null,node:null,finalizer:null},NTI289086={size:0,kind:18,base:null,node:null,finalizer:null},NTI282120={size:0,kind:14,base:null,node:null,finalizer:null},NTI176006={size:0,kind:31,base:null,node:null,finalizer:null},NTI282129={size:0,kind:18,base:null,node:null,finalizer:null},NTI282122={size:0,kind:22,base:null,node:null,finalizer:null},NTI283068={size:0,kind:18,base:null,node:null,finalizer:null},NTI266203={size:0,kind:18,base:null,node:null,finalizer:null},NTI176026={size:0,kind:36,base:null,node:null,finalizer:null},NTI268456={size:0,kind:18,base:null,node:null,finalizer:null},NTI268658={size:0,kind:18,base:null,node:null,finalizer:null},NTI268565={size:0,kind:18,base:null,node:null,finalizer:null},NTI176040={size:0,kind:28,base:null,node:null,finalizer:null},NNI268565={kind:2,len:2,offset:0,typ:null,name:null,sons:[{kind:1,offset:"Field0",len:0,typ:NTI176040,name:"Field0",sons:null},{kind:1,offset:"Field1",len:0,typ:NTI176040,name:"Field1",sons:null}]};NTI268565.node=NNI268565;var NNI268658={kind:2,len:2,offset:0,typ:null,name:null,sons:[{kind:1,offset:"Field0",len:0,typ:NTI176040,name:"Field0",sons:null},{kind:1,offset:"Field1",len:0,typ:NTI176040,name:"Field1",sons:null}]};NTI268658.node=NNI268658;var NNI268456={kind:2,len:2,offset:0,typ:null,name:null,sons:[{kind:1,offset:"Field0",len:0,typ:NTI176026,name:"Field0",sons:null},{kind:1,offset:"Field1",len:0,typ:NTI176026,name:"Field1",sons:null}]};NTI268456.node=NNI268456;var NNI266203={kind:2,len:2,offset:0,typ:null,name:null,sons:[{kind:1,offset:"Field0",len:0,typ:NTI176026,name:"Field0",sons:null},{kind:1,offset:"Field1",len:0,typ:NTI176026,name:"Field1",sons:null}]};NTI266203.node=NNI266203;var NNI282120={kind:2,offset:0,typ:null,name:null,len:6,sons:{0:{kind:1,offset:0,typ:NTI282120,name:"skLiner",len:0,sons:null},1:{kind:1,offset:1,typ:NTI282120,name:"skMiner",len:0,sons:null},2:{kind:1,offset:2,typ:NTI282120,name:"skScience",len:0,sons:null},3:{kind:1,offset:3,typ:NTI282120,name:"skMedic",len:0,sons:null},4:{kind:1,offset:4,typ:NTI282120,name:"skPolice",len:0,sons:null},5:{kind:1,offset:5,typ:NTI282120,name:"skGuild",len:0,sons:null}}};NTI282120.node=NNI282120;var NNI282129={kind:2,len:9,offset:0,typ:null,name:null,sons:[{kind:1,offset:"x",len:0,typ:NTI176026,name:"x",sons:null},{kind:1,offset:"y",len:0,typ:NTI176026,name:"y",sons:null},{kind:1,offset:"a",len:0,typ:NTI176026,name:"a",sons:null},{kind:1,offset:"vx",len:0,typ:NTI176026,name:"vx",sons:null},{kind:1,offset:"vy",len:0,typ:NTI176026,name:"vy",sons:null},{kind:1,offset:"va",len:0,typ:NTI176026,name:"va",sons:null},{kind:1,offset:"r",len:0,typ:NTI176026,name:"r",sons:null},{kind:1,offset:"glow",len:0,typ:NTI176006,name:"glow",sons:null},{kind:1,offset:"kind",len:0,typ:NTI282120,name:"kind",sons:null}]};NTI282129.node=NNI282129,NTI282122.base=NTI282129;var NNI283068={kind:2,len:2,offset:0,typ:null,name:null,sons:[{kind:1,offset:"ship",len:0,typ:NTI282122,name:"ship",sons:null},{kind:1,offset:"ticks",len:0,typ:NTI176006,name:"ticks",sons:null}]};NTI283068.node=NNI283068,NTI289089.base=NTI176042;var NNI289086={kind:2,len:5,offset:0,typ:null,name:null,sons:[{kind:1,offset:"data",len:0,typ:NTI289089,name:"data",sons:null},{kind:1,offset:"head",len:0,typ:NTI176006,name:"head",sons:null},{kind:1,offset:"tail",len:0,typ:NTI176006,name:"tail",sons:null},{kind:1,offset:"count",len:0,typ:NTI176006,name:"count",sons:null},{kind:1,offset:"mask",len:0,typ:NTI176006,name:"mask",sons:null}]};NTI289086.node=NNI289086,NTI417536.base=NTI176006,NTI417531.base=NTI176006;var NNI278121={kind:2,len:16,offset:0,typ:null,name:null,sons:[{kind:1,offset:"x",len:0,typ:NTI176026,name:"x",sons:null},{kind:1,offset:"y",len:0,typ:NTI176026,name:"y",sons:null},{kind:1,offset:"a",len:0,typ:NTI176026,name:"a",sons:null},{kind:1,offset:"r",len:0,typ:NTI176026,name:"r",sons:null},{kind:1,offset:"vx",len:0,typ:NTI176026,name:"vx",sons:null},{kind:1,offset:"vy",len:0,typ:NTI176026,name:"vy",sons:null},{kind:1,offset:"va",len:0,typ:NTI176026,name:"va",sons:null},{kind:1,offset:"drag",len:0,typ:NTI176026,name:"drag",sons:null},{kind:1,offset:"acc",len:0,typ:NTI176026,name:"acc",sons:null},{kind:1,offset:"strafe",len:0,typ:NTI176026,name:"strafe",sons:null},{kind:1,offset:"cd",len:0,typ:NTI176026,name:"cd",sons:null},{kind:1,offset:"glow",len:0,typ:NTI176026,name:"glow",sons:null},{kind:1,offset:"firing",len:0,typ:NTI176032,name:"firing",sons:null},{kind:1,offset:"alive",len:0,typ:NTI176032,name:"alive",sons:null},{kind:1,offset:"multiShots",len:0,typ:NTI176006,name:"multiShots",sons:null},{kind:1,offset:"ringShots",len:0,typ:NTI176006,name:"ringShots",sons:null}]};NTI278121.node=NNI278121,NTI278118.base=NTI278121;var NNI270015={kind:2,offset:0,typ:null,name:null,len:2,sons:{0:{kind:1,offset:0,typ:NTI270015,name:"bkHospital",len:0,sons:null},1:{kind:1,offset:1,typ:NTI270015,name:"bkRefinery",len:0,sons:null}}};NTI270015.node=NNI270015;var NNI270020={kind:2,len:12,offset:0,typ:null,name:null,sons:[{kind:1,offset:"x",len:0,typ:NTI176026,name:"x",sons:null},{kind:1,offset:"y",len:0,typ:NTI176026,name:"y",sons:null},{kind:1,offset:"a",len:0,typ:NTI176026,name:"a",sons:null},{kind:1,offset:"vx",len:0,typ:NTI176026,name:"vx",sons:null},{kind:1,offset:"vy",len:0,typ:NTI176026,name:"vy",sons:null},{kind:1,offset:"r",len:0,typ:NTI176026,name:"r",sons:null},{kind:1,offset:"a1",len:0,typ:NTI176026,name:"a1",sons:null},{kind:1,offset:"va1",len:0,typ:NTI176026,name:"va1",sons:null},{kind:1,offset:"a2",len:0,typ:NTI176026,name:"a2",sons:null},{kind:1,offset:"va2",len:0,typ:NTI176026,name:"va2",sons:null},{kind:1,offset:"kind",len:0,typ:NTI270015,name:"kind",sons:null},{kind:1,offset:"glow",len:0,typ:NTI176006,name:"glow",sons:null}]};NTI270020.node=NNI270020,NTI270017.base=NTI270020,NTI284019.base=NTI270017;var NNI271107={kind:2,offset:0,typ:null,name:null,len:6,sons:{0:{kind:1,offset:0,typ:NTI271107,name:"xkEx",len:0,sons:null},1:{kind:1,offset:1,typ:NTI271107,name:"xkOut",len:0,sons:null},2:{kind:1,offset:2,typ:NTI271107,name:"xkIn",len:0,sons:null},3:{kind:1,offset:3,typ:NTI271107,name:"xkTl",len:0,sons:null},4:{kind:1,offset:4,typ:NTI271107,name:"xkEvilIn",len:0,sons:null},5:{kind:1,offset:5,typ:NTI271107,name:"xkEvilOut",len:0,sons:null}}};NTI271107.node=NNI271107;var NNI271109={kind:2,offset:0,typ:null,name:null,len:2,sons:{0:{kind:1,offset:0,typ:NTI271109,name:"xeClamp",len:0,sons:null},1:{kind:1,offset:1,typ:NTI271109,name:"xeWrap",len:0,sons:null}}};NTI271109.node=NNI271109;var NNI271111={kind:2,len:10,offset:0,typ:null,name:null,sons:[{kind:1,offset:"x",len:0,typ:NTI176026,name:"x",sons:null},{kind:1,offset:"y",len:0,typ:NTI176026,name:"y",sons:null},{kind:1,offset:"vx",len:0,typ:NTI176026,name:"vx",sons:null},{kind:1,offset:"vy",len:0,typ:NTI176026,name:"vy",sons:null},{kind:1,offset:"a",len:0,typ:NTI176026,name:"a",sons:null},{kind:1,offset:"va",len:0,typ:NTI176026,name:"va",sons:null},{kind:1,offset:"r",len:0,typ:NTI176026,name:"r",sons:null},{kind:1,offset:"life",len:0,typ:NTI176006,name:"life",sons:null},{kind:1,offset:"kind",len:0,typ:NTI271107,name:"kind",sons:null},{kind:1,offset:"edge",len:0,typ:NTI271109,name:"edge",sons:null}]};NTI271111.node=NNI271111,NTI284021.base=NTI271111;var NNI273107={kind:2,offset:0,typ:null,name:null,len:2,sons:{0:{kind:1,offset:0,typ:NTI273107,name:"bkNormal",len:0,sons:null},1:{kind:1,offset:1,typ:NTI273107,name:"bkRing",len:0,sons:null}}};NTI273107.node=NNI273107;var NNI273109={kind:2,offset:0,typ:null,name:null,len:2,sons:{0:{kind:1,offset:0,typ:NTI273109,name:"baGood",len:0,sons:null},1:{kind:1,offset:1,typ:NTI273109,name:"baEvil",len:0,sons:null}}};NTI273109.node=NNI273109;var NNI273116={kind:2,len:10,offset:0,typ:null,name:null,sons:[{kind:1,offset:"x",len:0,typ:NTI176026,name:"x",sons:null},{kind:1,offset:"y",len:0,typ:NTI176026,name:"y",sons:null},{kind:1,offset:"a",len:0,typ:NTI176026,name:"a",sons:null},{kind:1,offset:"vx",len:0,typ:NTI176026,name:"vx",sons:null},{kind:1,offset:"vy",len:0,typ:NTI176026,name:"vy",sons:null},{kind:1,offset:"va",len:0,typ:NTI176026,name:"va",sons:null},{kind:1,offset:"r",len:0,typ:NTI176026,name:"r",sons:null},{kind:1,offset:"life",len:0,typ:NTI176006,name:"life",sons:null},{kind:1,offset:"ring",len:0,typ:NTI273107,name:"ring",sons:null},{kind:1,offset:"evil",len:0,typ:NTI273109,name:"evil",sons:null}]};NTI273116.node=NNI273116,NTI273111.base=NTI273116,NTI284023.base=NTI273111,NTI284025.base=NTI273111;var NNI274107={kind:2,offset:0,typ:null,name:null,len:3,sons:{0:{kind:1,offset:0,typ:NTI274107,name:"hkVandal",len:0,sons:null},1:{kind:1,offset:1,typ:NTI274107,name:"hkOri",len:0,sons:null},2:{kind:1,offset:2,typ:NTI274107,name:"hkTrilobite",len:0,sons:null}}};NTI274107.node=NNI274107;var NNI274113={kind:2,len:14,offset:0,typ:null,name:null,sons:[{kind:1,offset:"x",len:0,typ:NTI176026,name:"x",sons:null},{kind:1,offset:"y",len:0,typ:NTI176026,name:"y",sons:null},{kind:1,offset:"a",len:0,typ:NTI176026,name:"a",sons:null},{kind:1,offset:"vx",len:0,typ:NTI176026,name:"vx",sons:null},{kind:1,offset:"vy",len:0,typ:NTI176026,name:"vy",sons:null},{kind:1,offset:"va",len:0,typ:NTI176026,name:"va",sons:null},{kind:1,offset:"r",len:0,typ:NTI176026,name:"r",sons:null},{kind:1,offset:"acc",len:0,typ:NTI176026,name:"acc",sons:null},{kind:1,offset:"drag",len:0,typ:NTI176026,name:"drag",sons:null},{kind:1,offset:"glow",len:0,typ:NTI176006,name:"glow",sons:null},{kind:1,offset:"cd",len:0,typ:NTI176006,name:"cd",sons:null},{kind:1,offset:"burstPause",len:0,typ:NTI176006,name:"burstPause",sons:null},{kind:1,offset:"burstShots",len:0,typ:NTI176006,name:"burstShots",sons:null},{kind:1,offset:"kind",len:0,typ:NTI274107,name:"kind",sons:null}]};NTI274113.node=NNI274113,NTI274109.base=NTI274113,NTI284027.base=NTI274109;var NNI275056={kind:2,len:5,offset:0,typ:null,name:null,sons:[{kind:1,offset:"threshold",len:0,typ:NTI176006,name:"threshold",sons:null},{kind:1,offset:"spawnCount",len:0,typ:NTI176006,name:"spawnCount",sons:null},{kind:1,offset:"hooligan",len:0,typ:NTI274109,name:"hooligan",sons:null},{kind:1,offset:"incoming",len:0,typ:NTI176032,name:"incoming",sons:null},{kind:1,offset:"ticks",len:0,typ:NTI176006,name:"ticks",sons:null}]};NTI275056.node=NNI275056,NTI275055.base=NTI275056;var NNI276120={kind:2,offset:0,typ:null,name:null,len:2,sons:{0:{kind:1,offset:0,typ:NTI276120,name:"lkGem",len:0,sons:null},1:{kind:1,offset:1,typ:NTI276120,name:"lkPod",len:0,sons:null}}};NTI276120.node=NNI276120;var NNI276125={kind:2,len:9,offset:0,typ:null,name:null,sons:[{kind:1,offset:"x",len:0,typ:NTI176026,name:"x",sons:null},{kind:1,offset:"y",len:0,typ:NTI176026,name:"y",sons:null},{kind:1,offset:"a",len:0,typ:NTI176026,name:"a",sons:null},{kind:1,offset:"vx",len:0,typ:NTI176026,name:"vx",sons:null},{kind:1,offset:"vy",len:0,typ:NTI176026,name:"vy",sons:null},{kind:1,offset:"va",len:0,typ:NTI176026,name:"va",sons:null},{kind:1,offset:"r",len:0,typ:NTI176026,name:"r",sons:null},{kind:1,offset:"kind",len:0,typ:NTI276120,name:"kind",sons:null},{kind:1,offset:"life",len:0,typ:NTI176006,name:"life",sons:null}]};NTI276125.node=NNI276125,NTI276122.base=NTI276125,NTI284030.base=NTI276122;var NNI277108={kind:2,len:5,offset:0,typ:null,name:null,sons:[{kind:1,offset:"x",len:0,typ:NTI176026,name:"x",sons:null},{kind:1,offset:"y",len:0,typ:NTI176026,name:"y",sons:null},{kind:1,offset:"vx",len:0,typ:NTI176026,name:"vx",sons:null},{kind:1,offset:"vy",len:0,typ:NTI176026,name:"vy",sons:null},{kind:1,offset:"life",len:0,typ:NTI176006,name:"life",sons:null}]};NTI277108.node=NNI277108,NTI277107.base=NTI277108,NTI284032.base=NTI277107;var NNI279122={kind:2,offset:0,typ:null,name:null,len:6,sons:{0:{kind:1,offset:0,typ:NTI279122,name:"rsTiny",len:0,sons:null},1:{kind:1,offset:1,typ:NTI279122,name:"rsSmall",len:0,sons:null},2:{kind:1,offset:2,typ:NTI279122,name:"rsMedium",len:0,sons:null},3:{kind:1,offset:3,typ:NTI279122,name:"rsLarge",len:0,sons:null},4:{kind:1,offset:4,typ:NTI279122,name:"rsHuge",len:0,sons:null},5:{kind:1,offset:5,typ:NTI279122,name:"rsGigantic",len:0,sons:null}}};NTI279122.node=NNI279122;var NNI279120={kind:2,offset:0,typ:null,name:null,len:7,sons:{0:{kind:1,offset:0,typ:NTI279120,name:"rmIce",len:0,sons:null},1:{kind:1,offset:1,typ:NTI279120,name:"rmC",len:0,sons:null},2:{kind:1,offset:2,typ:NTI279120,name:"rmS",len:0,sons:null},3:{kind:1,offset:3,typ:NTI279120,name:"rmM",len:0,sons:null},4:{kind:1,offset:4,typ:NTI279120,name:"rmT",len:0,sons:null},5:{kind:1,offset:5,typ:NTI279120,name:"rmX",len:0,sons:null},6:{kind:1,offset:6,typ:NTI279120,name:"rmXX",len:0,sons:null}}};NTI279120.node=NNI279120;var NNI279138={kind:2,len:10,offset:0,typ:null,name:null,sons:[{kind:1,offset:"x",len:0,typ:NTI176026,name:"x",sons:null},{kind:1,offset:"y",len:0,typ:NTI176026,name:"y",sons:null},{kind:1,offset:"a",len:0,typ:NTI176026,name:"a",sons:null},{kind:1,offset:"vx",len:0,typ:NTI176026,name:"vx",sons:null},{kind:1,offset:"vy",len:0,typ:NTI176026,name:"vy",sons:null},{kind:1,offset:"va",len:0,typ:NTI176026,name:"va",sons:null},{kind:1,offset:"r",len:0,typ:NTI176026,name:"r",sons:null},{kind:1,offset:"size",len:0,typ:NTI279122,name:"size",sons:null},{kind:1,offset:"mat",len:0,typ:NTI279120,name:"mat",sons:null},{kind:1,offset:"shape",len:0,typ:NTI176006,name:"shape",sons:null}]};NTI279138.node=NNI279138,NTI279124.base=NTI279138,NTI284034.base=NTI279124;var NNI281056={kind:2,len:2,offset:0,typ:null,name:null,sons:[{kind:1,offset:"rock",len:0,typ:NTI279124,name:"rock",sons:null},{kind:1,offset:"ticks",len:0,typ:NTI176006,name:"ticks",sons:null}]};NTI281056.node=NNI281056,NTI281055.base=NTI281056,NTI284037.base=NTI282122,NTI284042.base=NTI176006,NTI284046.base=NTI176006;var NNI284016={kind:2,len:18,offset:0,typ:null,name:null,sons:[{kind:1,offset:"tick",len:0,typ:NTI176006,name:"tick",sons:null},{kind:1,offset:"player",len:0,typ:NTI278118,name:"player",sons:null},{kind:1,offset:"bases",len:0,typ:NTI284019,name:"bases",sons:null},{kind:1,offset:"booms",len:0,typ:NTI284021,name:"booms",sons:null},{kind:1,offset:"bullets",len:0,typ:NTI284023,name:"bullets",sons:null},{kind:1,offset:"bulletsEvil",len:0,typ:NTI284025,name:"bulletsEvil",sons:null},{kind:1,offset:"hooligans",len:0,typ:NTI284027,name:"hooligans",sons:null},{kind:1,offset:"hooliganTimer",len:0,typ:NTI275055,name:"hooliganTimer",sons:null},{kind:1,offset:"loots",len:0,typ:NTI284030,name:"loots",sons:null},{kind:1,offset:"particles",len:0,typ:NTI284032,name:"particles",sons:null},{kind:1,offset:"rocks",len:0,typ:NTI284034,name:"rocks",sons:null},{kind:1,offset:"rockTimer",len:0,typ:NTI281055,name:"rockTimer",sons:null},{kind:1,offset:"ships",len:0,typ:NTI284037,name:"ships",sons:null},{kind:1,offset:"shipTimer",len:0,typ:NTI283068,name:"shipTimer",sons:null},{kind:1,offset:"cargo",len:0,typ:NTI284042,name:"cargo",sons:null},{kind:1,offset:"delivered",len:0,typ:NTI284046,name:"delivered",sons:null},{kind:1,offset:"rockScore",len:0,typ:NTI176006,name:"rockScore",sons:null},{kind:1,offset:"shipScore",len:0,typ:NTI176006,name:"shipScore",sons:null}]};NTI284016.node=NNI284016,NTI284015.base=NTI284016;var NNI279178={kind:2,len:2,offset:0,typ:null,name:null,sons:[{kind:1,offset:"Field0",len:0,typ:NTI176026,name:"Field0",sons:null},{kind:1,offset:"Field1",len:0,typ:NTI176026,name:"Field1",sons:null}]};NTI279178.node=NNI279178,NTI279177.base=NTI279178,NTI279174.base=NTI279177;var NNI417573={kind:2,len:2,offset:0,typ:null,name:null,sons:[{kind:1,offset:"Field0",len:0,typ:NTI284015,name:"Field0",sons:null},{kind:1,offset:"Field1",len:0,typ:NTI279174,name:"Field1",sons:null}]};NTI417573.node=NNI417573;var NNI279376={kind:2,len:2,offset:0,typ:null,name:null,sons:[{kind:1,offset:"Field0",len:0,typ:NTI176040,name:"Field0",sons:null},{kind:1,offset:"Field1",len:0,typ:NTI176040,name:"Field1",sons:null}]};NTI279376.node=NNI279376;var NNI279669={kind:2,len:2,offset:0,typ:null,name:null,sons:[{kind:1,offset:"Field0",len:0,typ:NTI176026,name:"Field0",sons:null},{kind:1,offset:"Field1",len:0,typ:NTI176026,name:"Field1",sons:null}]};NTI279669.node=NNI279669,NTI279687.base=NTI279669,NTI279668.base=NTI279669;var NNI270059={kind:2,len:2,offset:0,typ:null,name:null,sons:[{kind:1,offset:"Field0",len:0,typ:NTI176040,name:"Field0",sons:null},{kind:1,offset:"Field1",len:0,typ:NTI176040,name:"Field1",sons:null}]};NTI270059.node=NNI270059;var NNI271206={kind:2,len:2,offset:0,typ:null,name:null,sons:[{kind:1,offset:"Field0",len:0,typ:NTI176040,name:"Field0",sons:null},{kind:1,offset:"Field1",len:0,typ:NTI176040,name:"Field1",sons:null}]};NTI271206.node=NNI271206;var NNI274547={kind:2,len:2,offset:0,typ:null,name:null,sons:[{kind:1,offset:"Field0",len:0,typ:NTI176040,name:"Field0",sons:null},{kind:1,offset:"Field1",len:0,typ:NTI176040,name:"Field1",sons:null}]};NTI274547.node=NNI274547;var NNI274601={kind:2,len:2,offset:0,typ:null,name:null,sons:[{kind:1,offset:"Field0",len:0,typ:NTI176040,name:"Field0",sons:null},{kind:1,offset:"Field1",len:0,typ:NTI176040,name:"Field1",sons:null}]};NTI274601.node=NNI274601;var NNI274643={kind:2,len:2,offset:0,typ:null,name:null,sons:[{kind:1,offset:"Field0",len:0,typ:NTI176040,name:"Field0",sons:null},{kind:1,offset:"Field1",len:0,typ:NTI176040,name:"Field1",sons:null}]};NTI274643.node=NNI274643;var NNI277183={kind:2,len:2,offset:0,typ:null,name:null,sons:[{kind:1,offset:"Field0",len:0,typ:NTI176040,name:"Field0",sons:null},{kind:1,offset:"Field1",len:0,typ:NTI176040,name:"Field1",sons:null}]};NTI277183.node=NNI277183;var NNI278592={kind:2,len:2,offset:0,typ:null,name:null,sons:[{kind:1,offset:"Field0",len:0,typ:NTI176040,name:"Field0",sons:null},{kind:1,offset:"Field1",len:0,typ:NTI176040,name:"Field1",sons:null}]};NTI278592.node=NNI278592;var NNI282381={kind:2,len:2,offset:0,typ:null,name:null,sons:[{kind:1,offset:"Field0",len:0,typ:NTI176040,name:"Field0",sons:null},{kind:1,offset:"Field1",len:0,typ:NTI176040,name:"Field1",sons:null}]};NTI282381.node=NNI282381;var NNI282196={kind:2,len:2,offset:0,typ:null,name:null,sons:[{kind:1,offset:"Field0",len:0,typ:NTI176040,name:"Field0",sons:null},{kind:1,offset:"Field1",len:0,typ:NTI176040,name:"Field1",sons:null}]};NTI282196.node=NNI282196;var NNI417017={kind:2,offset:0,typ:null,name:null,len:4,sons:{0:{kind:1,offset:0,typ:NTI417017,name:"ksDown",len:0,sons:null},1:{kind:1,offset:1,typ:NTI417017,name:"ksOn",len:0,sons:null},2:{kind:1,offset:2,typ:NTI417017,name:"ksUp",len:0,sons:null},3:{kind:1,offset:3,typ:NTI417017,name:"ksOff",len:0,sons:null}}};NTI417017.node=NNI417017;var NNI417053={kind:2,len:3,offset:0,typ:null,name:null,sons:[{kind:1,offset:"Field0",len:0,typ:NTI242230,name:"Field0",sons:null},{kind:1,offset:"Field1",len:0,typ:NTI176040,name:"Field1",sons:null},{kind:1,offset:"Field2",len:0,typ:NTI417017,name:"Field2",sons:null}]};NTI417053.node=NNI417053,NTI417050.base=NTI417053;var NNI417047={kind:2,len:2,offset:0,typ:null,name:null,sons:[{kind:1,offset:"data",len:0,typ:NTI417050,name:"data",sons:null},{kind:1,offset:"counter",len:0,typ:NTI176006,name:"counter",sons:null}]};NTI417047.node=NNI417047,NTI417063.base=NTI176006,NTI179404.base=NTI179494,NTI297309.base=NTI179404,NTI295728.base=NTI179404,NTI295717.base=NTI179404;var NNI284533={kind:2,len:2,offset:0,typ:null,name:null,sons:[{kind:1,offset:"Field0",len:0,typ:NTI284534,name:"Field0",sons:null},{kind:1,offset:"Field1",len:0,typ:NTI284535,name:"Field1",sons:null}]};NTI284533.node=NNI284533,NTI306184.base=NTI274109,NTI284407.base=NTI276122,NTI266429.base=NTI176026,NTI271613.base=NTI266429,NTI266426.base=NTI266429,NTI266469.base=NTI176026,NTI266466.base=NTI266469,NTI268373.base=NTI176026;var NNI179452={kind:2,len:0,offset:0,typ:null,name:null,sons:[]};NTI179452.node=NNI179452;var NNI179430={kind:2,len:0,offset:0,typ:null,name:null,sons:[]};NTI179430.node=NNI179430,NTI179508.base=NTI179426,NTI179514.base=NTI179426;var NNI179426={kind:2,len:6,offset:0,typ:null,name:null,sons:[{kind:1,offset:"parent",len:0,typ:NTI179508,name:"parent",sons:null},{kind:1,offset:"name",len:0,typ:NTI176042,name:"name",sons:null},{kind:1,offset:"message",len:0,typ:NTI176040,name:"msg",sons:null},{kind:1,offset:"trace",len:0,typ:NTI176040,name:"trace",sons:null},{kind:1,offset:"raiseId",len:0,typ:NTI176016,name:"raiseId",sons:null},{kind:1,offset:"up",len:0,typ:NTI179514,name:"up",sons:null}]};NTI179426.node=NNI179426;var NNI179408={kind:2,len:0,offset:0,typ:null,name:null,sons:[]};NTI179408.node=NNI179408,NTI179426.base=NTI179408,NTI179430.base=NTI179426,NTI179452.base=NTI179430;var NNI354247={kind:2,len:2,offset:0,typ:null,name:null,sons:[{kind:1,offset:"a",len:0,typ:NTI351432,name:"a",sons:null},{kind:1,offset:"b",len:0,typ:NTI176006,name:"b",sons:null}]};NTI354247.node=NNI354247,NTI290514.base=NTI284015,NTI290531.base=NTI284015,NTI290473.base=NTI284015,NTI290475.base=NTI284015;var NNI290472={kind:2,len:2,offset:0,typ:null,name:null,sons:[{kind:1,offset:"Field0",len:0,typ:NTI290473,name:"Field0",sons:null},{kind:1,offset:"Field1",len:0,typ:NTI290475,name:"Field1",sons:null}]};function makeNimstrLit(l){for(var n=l.length,e=new Array(n),i=0;i<n;++i)e[i]=l.charCodeAt(i);return e}function cstrToNimstr(l){for(var n=l.length,e=new Array(n),i=0,t=0;t<n;++t){var a=l.charCodeAt(t);a<128?e[i]=a:(a<2048?e[i]=a>>6|192:(a<55296||a>=57344?e[i]=a>>12|224:(++t,a=65536+((1023&a)<<10|1023&l.charCodeAt(t)),e[i]=a>>18|240,e[++i]=a>>12&63|128),e[++i]=a>>6&63|128),e[++i]=63&a|128),++i}return e}function setConstr(){for(var l={},n=0;n<arguments.length;++n){var e=arguments[n];if("object"==typeof e)for(var i=e[0];i<=e[1];++i)l[i]=!0;else l[e]=!0}return l}NTI290472.node=NNI290472;var ConstSet1=setConstr(17,16,4,18,27,19,23,22,21);function nimCopy(l,n,e){var i=null;switch(e.kind){case 21:case 22:case 23:case 5:i=is_fat_pointer_200801(e)?[n[0],n[1]]:n;break;case 19:if(null==l)l={};else for(var t in l)delete l[t];for(var t in n)l[t]=n[t];i=l;break;case 18:case 17:nimCopyAux(i=null!=e.base?nimCopy(l,n,e.base):17==e.kind?null==l?{m_type:e}:l:null==l?{}:l,n,e.node);break;case 24:case 4:case 27:case 16:if(null===n)i=null;else{null==l?l=new Array(n.length):l.length=n.length,i=l;for(var a=0;a<n.length;++a)i[a]=nimCopy(i[a],n[a],e.base)}break;case 28:null!==n&&(i=n.slice(0));break;default:i=n}return i}function toJSStr(l){var n,e=new_seq_199336(null!=l?l.length:0),i=0,t=0;l:for(;i<(null!=l?l.length:0);){var a=l[i];if(a<128)e[t]=String.fromCharCode(a),i+=1;else{var r=new_seq_199336(0);n:do{e:for(;;){0;var u=a.toString(16);if(1==(null!=u?u.length:0)?null!=r?r.push("%0"):r=["%0"]:null!=r?r.push("%"):r=["%"],null!=r?r.push(u):r=[u],i+=1,(null!=l?l.length:0)<=i||l[i]<128)break n;a=l[i]}}while(0);++excHandler,n=framePtr;try{e[t]=decodeURIComponent(r.join("")),--excHandler}catch(l){var o=lastJSError;lastJSError=l,--excHandler,framePtr=n,e[t]=r.join(""),lastJSError=o}finally{framePtr=n}}t+=1}if(null===e&&(e=[]),e.length<t)for(var s=e.length;s<t;++s)e.push(null);else e.length=t;return e.join("")}function rawEcho(){for(var l="",n=0;n<arguments.length;++n)l+=toJSStr(arguments[n]);console.log(l)}function genericReset(l,n){var e=null;switch(e=null,n.kind){case 21:case 22:case 23:case 5:is_fat_pointer_200801(n)&&(e=[null,0]);break;case 19:e={};break;case 18:case 17:e=17==n.kind?{m_type:n}:{};break;case 24:case 27:e=[];break;case 4:case 16:e=new Array(l.length);for(var i=0;i<l.length;++i)e[i]=genericReset(l[i],n.base)}return e}function eqStrings(l,n){if(l==n)return!0;if(null===l&&0==n.length)return!0;if(null===n&&0==l.length)return!0;if(!l||!n)return!1;var e=l.length;if(e!=n.length)return!1;for(var i=0;i<e;++i)if(l[i]!=n[i])return!1;return!0}function nimMax(l,n){var e=0;l:do{e=n<=l?l:n;break l}while(0);return e}function nimMin(l,n){var e=0;l:do{e=l<=n?l:n;break l}while(0);return e}function mnewString(l){return new Array(l)}var ConstSet2=setConstr(60,62,94),ConstSet3=setConstr(60,62,94),ConstSet4=setConstr(45,43,32),ConstSet5=setConstr([48,57]),ConstSet6=setConstr([48,57]),ConstSet7=setConstr([48,57]),ConstSet8=setConstr([65,90],[97,122]);function raiseException(l,n){throw l.name=n,0==excHandler&&unhandledException(l),l}function nimCharToStr(l){var n=null;return(n=nimCopy(null,mnewString(1),NTI176040))[0]=l,n}function addChar(l,n){l.push(n)}var nim_program_result=0,global_raise_hook_194618=[null],local_raise_hook_194623=[null],out_of_mem_hook_194626=[null];Math.trunc||(Math.trunc=function(l){return l=+l,isFinite(l)?l-l%1||(l<0?-0:0===l?l:0):l});var lc_229207=[{}],raf_token_230042=[0],raf_time_230043=[0],pixel_ratio_240054=window.devicePixelRatio;function new_image_transform_240228(l,n,e,i){return{xScale:l,xSkew:n,ySkew:e,yScale:i}}function new_image_transform_240281(l){return new_image_transform_240228(l,0,0,l)}var default_transform_240298=new_image_transform_240281(1),object_id_242437=[0];function is_fat_pointer_200801(l){var n=!1;l:do{n=!(null!=ConstSet1[l.base.kind]);break l}while(0);return n}function nimCopyAux(l,n,e){switch(e.kind){case 0:break;case 1:l[e.offset]=nimCopy(l[e.offset],n[e.offset],e.typ);break;case 2:for(var i=0;i<e.sons.length;i++)nimCopyAux(l,n,e.sons[i]);break;case 3:l[e.offset]=nimCopy(l[e.offset],n[e.offset],e.typ);for(i=0;i<e.sons.length;++i)nimCopyAux(l,n,e.sons[i][1])}}function hsl_268572(l,n,e){return nimCopy(null,(makeNimstrLit("hsl(")||[]).concat(cstrToNimstr(l+"")||[],makeNimstrLit(",")||[],cstrToNimstr(n+"")||[],makeNimstrLit("%,")||[],cstrToNimstr(e+"")||[],makeNimstrLit("%)")||[]),NTI176040)}function get_glow_colors_268561(l,n){var e={Field0:null,Field1:null};return nimCopy(e,{Field0:hsl_268572(n,60+40*l,55+45*l),Field1:hsl_268572(n-20+20*l,30+40*l,45+35*l)},NTI268565),e}function make_discrete_glow_colors_268653(l){var n=[{Field0:null,Field1:null},{Field0:null,Field1:null},{Field0:null,Field1:null},{Field0:null,Field1:null},{Field0:null,Field1:null},{Field0:null,Field1:null},{Field0:null,Field1:null},{Field0:null,Field1:null},{Field0:null,Field1:null},{Field0:null,Field1:null},{Field0:null,Field1:null},{Field0:null,Field1:null},{Field0:null,Field1:null},{Field0:null,Field1:null},{Field0:null,Field1:null},{Field0:null,Field1:null}],e=0,i=0;l:for(;i<16;)nimCopy(n[e=i],get_glow_colors_268561(.06666666666666667*e,l),NTI268658),i+=1;return n}var discrete_glow_colors_268683=make_discrete_glow_colors_268653(180),discrete_evil_colors_268684=make_discrete_glow_colors_268653(300);function new_image_dimensions_240176(l,n,e,i){return{x:l,y:n,w:e,h:i,cx:l+e/2,cy:n+i/2}}function new_image_dimensions_240211(l){return new_image_dimensions_240176(0,0,l,l)}var img_radius_270055=20*pixel_ratio_240054,img_dims_270056=new_image_dimensions_240211(1.3*img_radius_270055*2),img_colors_270065=[{Field0:makeNimstrLit("#FFFFFF"),Field1:makeNimstrLit("#FF0000")},{Field0:makeNimstrLit("#FFFFFF"),Field1:makeNimstrLit("#00CCAA")}],top_imgs_270072=[[[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]]],middle_img_270073=[null],bottom_img_270074=[null],img_radius_271133=100*pixel_ratio_240054,img_dims_271134=new_image_dimensions_240211(1.1*img_radius_271133*2),boom_imgs_271139=[[null,null,null,null,null,null]],img_radius_273146=7.5*pixel_ratio_240054,img_dims_273147=new_image_dimensions_240211(1.3*img_radius_273146*2),bullet_imgs_273157=[[[[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]],[[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]]]],img_radius_274202=10*pixel_ratio_240054,img_dims_274203=new_image_dimensions_240211(1.3*img_radius_274202*2),present_imgs_274210=[[[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]]],past_img_274214=[[null,null,null]],future_img_274218=[[null,null,null]],loot_img_radius_276153=4*pixel_ratio_240054,loot_img_dims_276154=new_image_dimensions_240211(1.2*loot_img_radius_276153*2),loot_imgs_276161=[[[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]]],img_radius_277128=2.5*pixel_ratio_240054,img_dims_277129=new_image_dimensions_240211(1.3*img_radius_277128*2),img_canvases_277134=[[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]],player_imgs_278422=[[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]],player_past_img_278423=[null],player_future_img_278424=[null],img_radius_278425=10*pixel_ratio_240054,canvas_width_278426=1.25*img_radius_278425*2,img_dims_278427=new_image_dimensions_240211(canvas_width_278426),rock_points_279184=[[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]],rock_imgs_279194=[[[[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null]],[[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null]],[[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null]],[[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null]],[[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null]],[[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null]],[[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null]],[[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null]],[[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null]],[[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null]],[[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null]],[[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null]],[[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null]],[[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null]],[[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null]],[[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null],[null,null,null,null,null,null,null]]]],rock_past_imgs_279201=[[[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null]]],rock_future_imgs_279208=[[[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null],[null,null,null,null,null,null]]],rock_img_dimensions_279212=[[null,null,null,null,null,null]],img_radius_282154=7*pixel_ratio_240054,img_dims_282155=new_image_dimensions_240211(1.3*img_radius_282154*2),ship_imgs_282162=[[[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]]],ship_past_img_282163=[null],ship_future_img_282164=[null],timetarget_289109=[0];function get_context_239052(l){return l.getContext("2d")}function new_seq_199336(l){var n=null;n=new Array(l);for(var e=0;e<l;++e)n[e]=null;return n}function adjust_for_pixelratio_240068(l,n,e,i){l.width=e*pixel_ratio_240054,l.height=i*pixel_ratio_240054,l.style.width=toJSStr((cstrToNimstr(e+"")||[]).concat(makeNimstrLit("px")||[])),l.style.height=toJSStr((cstrToNimstr(i+"")||[]).concat(makeNimstrLit("px")||[])),n.scale(pixel_ratio_240054,pixel_ratio_240054)}function adjust_for_pixelratio_240093(l,n,e){adjust_for_pixelratio_240068(l,get_context_239052(l),n,e)}function new_player_278181(){return{x:400,y:272.72727272727275,a:1.5707963267948966,r:10,vx:0,vy:0,va:0,acc:0,strafe:0,drag:.02,cd:0,glow:0,firing:!1,alive:!0,multiShots:0,ringShots:0}}function randf_267054(){return Math.random()}function randf_267171(l){return l*randf_267054()}function randang_267308(){return randf_267171(6.283185307179586)}function new_hospital_base_270134(){return{x:640,y:136.36363636363637,a:randang_267308(),vx:0,vy:0,a1:0,va1:.01,a2:0,va2:-.02,glow:0,r:20,kind:0}}function new_refinery_base_270165(){return{x:160,y:409.0909090909091,a:randang_267308(),vx:0,vy:0,a1:0,va1:-.03,a2:0,va2:.06,glow:0,r:20,kind:1}}function next_threshold_275085(l){return 100+50*l}function rand_edge_pt_268453(l){var n,e={Field0:0,Field1:0};switch(l){case 0:n={Field0:randf_267171(800),Field1:1};break;case 2:n={Field0:randf_267171(800),Field1:544.4545454545455};break;case 3:n={Field0:1,Field1:randf_267171(545.4545454545455)};break;case 1:n={Field0:799,Field1:randf_267171(545.4545454545455)}}return nimCopy(e,n,NTI268456),e}function randf_267107(l){return l*randf_267054()}function randi_267102(l){return Math.floor(randf_267107(l))}function randi_267097(l,n){return l+randi_267102(n-l+1)}function rand_enum_268388(){return randi_267097(0,3)}function rand_side_268384(){return rand_enum_268388()}function choose_kind_274296(l){var n=randf_267054()+1*l;return n<.5?0:n<.9?1:2}function get_thrust_274262(l){var n;switch(l){case 0:n=.015;break;case 1:n=.03;break;case 2:n=.022}return n}function new_hooligan_274329(l){var n,e,i={Field0:0,Field1:0};nimCopy(i,rand_edge_pt_268453(rand_side_268384()),NTI268456),n=i.Field0,e=i.Field1;var t=choose_kind_274296(l);return{x:n,y:e,a:randang_267308(),r:10,vx:0,vy:0,va:0,kind:t,acc:get_thrust_274262(t),drag:.01,glow:0,cd:0,burstPause:36,burstShots:0}}function new_hooligan_timer_275104(){return{threshold:next_threshold_275085(0),spawnCount:0,hooligan:new_hooligan_274329(0),incoming:!1,ticks:300}}function to_radius_279286(l){var n;switch(l){case 0:n=10;break;case 1:n=15;break;case 2:n=20;break;case 3:n=25;break;case 4:n=30;break;case 5:n=35}return n}function new_rock_279778(l,n,e,i,t,a,r,u,o){return{x:l,y:n,a:e,vx:i,vy:t,mat:r,size:u,va:a,r:to_radius_279286(u),shape:o}}function randf_267254(l,n){return l+randf_267171(n-l)}function randctr_267251(){return randf_267254(-1,1)}function randctr_268502(l){return l*randctr_267251()}function choose_mat_279836(l){var n=randf_267054()*(1+l);return n<.3?0:n<.6?1:n<.9?2:n<1.4?3:n<1.9?4:n<2.6?5:6}function choose_size_279818(l){var n=randf_267054()*(1+l);return n<.1?1:n<.3?2:n<.6?3:n<1?4:5}function spawn_rock_279869(l){var n={Field0:0,Field1:0};return nimCopy(n,rand_edge_pt_268453(rand_side_268384()),NTI268456),new_rock_279778(n.Field0,n.Field1,randang_267308(),randctr_268502(1),randctr_268502(1),randctr_268502(.05),choose_mat_279836(l),choose_size_279818(l),randi_267102(16))}function new_rock_timer_281084(){return{rock:spawn_rock_279869(0),ticks:0}}function randctr_268496(l,n){return l+randctr_268502(n)}function rand_angle_in_268491(l,n){var e;switch(l){case 0:e=randctr_268496(4.71238898038469,n);break;case 2:e=randctr_268496(1.5707963267948966,n);break;case 1:e=randctr_268496(3.141592653589793,n);break;case 3:e=randctr_268496(0,n)}return e}function ratoxy_266199(l,n){var e={Field0:0,Field1:0};return nimCopy(e,{Field0:l*Math.cos(n),Field1:l*Math.sin(n)},NTI266203),e}function rand_kind_282217(l){var n=randf_267054()+l,e=randf_267054();return n<.5?e<.5?0:1:n<.9?e<.5?3:5:e<.5?4:2}function new_rand_ship_282251(l){var n,e,i=rand_side_268384(),t={Field0:0,Field1:0};nimCopy(t,rand_edge_pt_268453(i),NTI268456),n=t.Field0,e=t.Field1;var a=rand_angle_in_268491(i,.9424777960769379),r={Field0:0,Field1:0};return nimCopy(r,ratoxy_266199(.8333333333333334,-a),NTI266203),{x:n,y:e,a:a,vx:r.Field0,vy:r.Field1,va:0,r:7,glow:45,kind:rand_kind_282217(l)}}function new_ship_timer_283091(){var l={ship:null,ticks:0};return nimCopy(l,{ship:new_rand_ship_282251(0),ticks:0},NTI283068),l}function new_scene_284086(){return{tick:0,player:new_player_278181(),bases:[new_hospital_base_270134(),new_refinery_base_270165()],booms:[],bullets:[],bulletsEvil:[],hooligans:[],hooliganTimer:new_hooligan_timer_275104(),particles:[],rocks:[spawn_rock_279869(0),spawn_rock_279869(0)],rockTimer:new_rock_timer_281084(),ships:[new_rand_ship_282251(0),new_rand_ship_282251(0)],shipTimer:new_ship_timer_283091(),cargo:[0,0],delivered:[0,0],rockScore:0,shipScore:0,loots:null}}function init_deque_289272(l){var n={data:null,head:0,tail:0,count:0,mask:0};n.mask=l-1,n.data=new Array(l);for(var e=0;e<l;++e)n.data[e]=null;return n}function new_timeline_289268(){var l={data:null,head:0,tail:0,count:0,mask:0};return nimCopy(l,init_deque_289272(256),NTI289086),l}function init_table_417095(l){var n={data:null,counter:0,counter:0};n.data=new Array(l);for(var e=0;e<l;++e)n.data[e]={Field0:0,Field1:null,Field2:0};return n}function new_game_417088(l){var n=new_scene_284086();return{ctx:l,mode:1,scene:n,timeline:new_timeline_289268(),timetraveldir:2,timetarget:n,inputs:init_table_417095(64),hiscore:[0,0,0,0],drawHelp:!0,dt:16}}function load_hi_score_417525(){var l=new Int32Array(4);return nimCopy(l,Flatted.parse(localStorage.getItem("nimSpaceRocks-hiscore")),NTI417536),l}function load_saved_scene_417571(){var l={Field0:null,Field1:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]};return nimCopy(l,{Field0:Flatted.parse(localStorage.getItem("nimSpaceRocks-scene")),Field1:Flatted.parse(localStorage.getItem("nimSpaceRocks-rockPoints"))},NTI417573),l}function expand_if_needed_289488(l){var n=l.mask+1;if(n<=l.count){var e=new_seq_199336(2*n),i=0,t=null,a={data:null,head:0,tail:0,count:0,mask:0};nimCopy(a,l,NTI289086);var r,u=a.head;r=a.count;var o=0;l:for(;o<r;)i=o,t=a.data[u],e[i]=t,u=u+1&a.mask,o+=1;l.data=e,l.mask=2*n-1,l.tail=l.count,l.head=0}}function add_first_289470(l,n){expand_if_needed_289488(l),l.count+=1,l.head=l.head-1&l.mask,l.data[l.head]=n}function len_289186(l){return l.count}function pop_last_290144(l){var n;return l.count-=1,l.tail=l.tail-1&l.mask,n=l.data[l.tail],l.data[l.tail]=genericReset(l.data[l.tail],NTI176042),n}function push_289449(l,n){add_first_289470(l,Flatted.stringify(n)),156<len_289186(l)&&pop_last_290144(l)}function to_img_radius_279303(l){return to_radius_279286(l)*pixel_ratio_240054}function to_canvas_width_279320(l){return 1.35*to_img_radius_279303(l)*2}function init_image_dimensionss_280183(){var l=0,n=0;l:for(;n<=5;)l=n,rock_img_dimensions_279212[0][l]=new_image_dimensions_240211(to_canvas_width_279320(l)),n+=1}function create_canvas_239364(){return document.createElement("canvas")}function HEX5BHEX5D_280472(l,n){var e={Field0:0,Field1:0};return nimCopy(e,l[(null!=l?l.length:0)-n],NTI279178),e}function make_rock_canvas_280449(l,n,e,i){var t=null;l:do{var a=to_img_radius_279303(n),r=rock_img_dimensions_279212[0][n].w,u=nimCopy(null,rock_points_279184[0][l],NTI279177),o=get_context_239052(create_canvas_239364());o.imageSmoothingEnabled=!1,o.canvas.width=r,o.canvas.height=r,o.translate(r/2,r/2),o.beginPath(),o.fillStyle=toJSStr(e.Field0),o.moveTo(HEX5BHEX5D_280472(u,1).Field0*a,HEX5BHEX5D_280472(u,1).Field1*a);var s={Field0:0,Field1:0},_=0,d=null!=u?u.length:0;n:for(;_<d;)nimCopy(s,u[_],NTI279178),o.lineTo(s.Field0*a,s.Field1*a),_+=1;o.closePath(),o.fill(),i&&(o.strokeStyle="#000000",o.lineWidth=1*pixel_ratio_240054,o.stroke()),o.beginPath(),o.fillStyle=toJSStr(e.Field1),o.moveTo(HEX5BHEX5D_280472(u,1).Field0*a*.75,HEX5BHEX5D_280472(u,1).Field1*a*.75);var c={Field0:0,Field1:0},f=0,m=null!=u?u.length:0;n:for(;f<m;)nimCopy(c,u[f],NTI279178),o.lineTo(c.Field0*a*.75,c.Field1*a*.75),f+=1;o.closePath(),o.fill(),t=o.canvas;break l}while(0);return t}function hsl_270263(l,n,e){return nimCopy(null,(makeNimstrLit("hsl(")||[]).concat(cstrToNimstr(l+"")||[],makeNimstrLit(",")||[],cstrToNimstr(n+"")||[],makeNimstrLit("%,")||[],cstrToNimstr(e+"")||[],makeNimstrLit("%)")||[]),NTI176040)}function hsl_279537(l,n,e,i){return nimCopy(null,(makeNimstrLit("hsla(")||[]).concat(cstrToNimstr(l+"")||[],makeNimstrLit(",")||[],cstrToNimstr(n+"")||[],makeNimstrLit("%,")||[],cstrToNimstr(e+"")||[],makeNimstrLit("%,")||[],cstrToNimstr(i+"")||[],makeNimstrLit(")")||[]),NTI176040)}function mat_to_color_279373(l){var n,e={Field0:null,Field1:null};switch(l){case 0:n={Field0:hsl_270263(220,30,65),Field1:hsl_270263(220,30,75)};break;case 1:n={Field0:hsl_270263(80,10,50),Field1:hsl_270263(80,10,60)};break;case 2:n={Field0:hsl_270263(50,30,50),Field1:hsl_270263(50,30,60)};break;case 3:n={Field0:hsl_270263(10,30,50),Field1:hsl_270263(10,30,60)};break;case 4:n={Field0:hsl_270263(0,20,30),Field1:hsl_270263(0,25,35)};break;case 5:n={Field0:hsl_279537(300,20,60,.5),Field1:hsl_279537(300,30,70,.5)};break;case 6:n={Field0:hsl_279537(200,80,70,.7),Field1:hsl_279537(180,90,80,.7)}}return nimCopy(e,n,NTI279376),e}function init_rock_imgs_280675(){var l=0,n=0;l:for(;n<16;){l=n;var e=0,i=0;n:for(;i<=5;){e=i;var t=0,a=0;e:for(;a<=6;)t=a,rock_imgs_279194[0][l][e][t]=make_rock_canvas_280449(l,e,mat_to_color_279373(t),!0),a+=1;i+=1}n+=1}}function init_past_future_rock_imgs_280849(){var l=0,n=0;l:for(;n<16;){l=n;var e=0,i=0;n:for(;i<=5;)e=i,rock_past_imgs_279201[0][l][e]=make_rock_canvas_280449(l,e,{Field0:makeNimstrLit("rgba(250,0,175,0.25)"),Field1:makeNimstrLit("rgba(250,0,175,0.25)")},!1),rock_future_imgs_279208[0][l][e]=make_rock_canvas_280449(l,e,{Field0:makeNimstrLit("rgba(20,190,250,0.25)"),Field1:makeNimstrLit("rgba(20,190,250,0.25)")},!1),i+=1;n+=1}}function init_imgs_280892(){init_image_dimensionss_280183(),init_rock_imgs_280675(),init_past_future_rock_imgs_280849()}function init_280907(l){nimCopy(rock_points_279184[0],l,NTI279174),init_imgs_280892()}function randictr_267233(l,n){return randi_267097(l-n,l+n)}function make_points_279666(){var l=null,n=randictr_267233(9,2),e=6.283185307179586/n;l=nimCopy(null,[],NTI279687);var i=0,t=0;l:for(;t<n;)i=t,null!=l?l.push(ratoxy_266199(randctr_268496(1,.25),randctr_268496(e*i,.09519977738150888))):l=[ratoxy_266199(randctr_268496(1,.25),randctr_268496(e*i,.09519977738150888))],t+=1;return l}function init_points_279741(){var l=0,n=0;l:for(;n<16;)l=n,rock_points_279184[0][l]=nimCopy(null,make_points_279666(),NTI279668),n+=1}function init_280923(){init_points_279741(),init_imgs_280892()}function emblem_fat_cross_269214(l,n,e){l.beginPath(),l.lineWidth=.325*n,l.strokeStyle=toJSStr(e),l.moveTo(-.475*n,0),l.lineTo(.475*n,0),l.moveTo(0,-.475*n),l.lineTo(0,.475*n),l.stroke(),l.closePath()}function emblem_diamond_269490(l,n,e){l.strokeStyle=toJSStr(e),l.lineWidth=.25*n,l.beginPath(),l.moveTo(-.4*n,0),l.lineTo(0,-.4*n),l.lineTo(.4*n,0),l.lineTo(0,.4*n),l.lineTo(-.4*n,0),l.lineTo(0,-.4*n),l.stroke(),l.closePath()}function make_top_img_270351(l,n){var e=get_context_239052(create_canvas_239364()),i=nimCopy(null,img_colors_270065[n],NTI270059),t=nimCopy(null,discrete_glow_colors_268683[l],NTI268658),a=img_radius_270055,r=img_dims_270056.w;switch(e.canvas.width=r,e.canvas.height=r,e.translate(r/2,r/2),e.fillStyle="hsl(0,0%,55%)",e.strokeStyle="hsl(0,0%,55%)",e.beginPath(),e.arc(0,0,.15*a,0,6.283185307179586,!1),e.fill(),e.moveTo(0,0),e.lineWidth=.3*a,e.lineTo(a,0),e.stroke(),e.arc(0,0,a,0,6.283185307179586,!1),e.stroke(),n){case 0:emblem_fat_cross_269214(e,.4*a,i.Field1);break;case 1:emblem_diamond_269490(e,.4*a,i.Field1)}e.beginPath(),e.strokeStyle=toJSStr(t.Field1),e.lineWidth=.09*a,e.arc(0,0,a,0,6.283185307179586,!1),e.stroke(),e.strokeStyle=toJSStr(t.Field0),e.lineWidth=.06*a,e.arc(0,0,a,0,6.283185307179586,!1),e.stroke(),top_imgs_270072[0][n][l]=e.canvas}function make_top_imgs_270406(){var l=0,n=0;l:for(;n<=1;){l=n;var e=0;n:for(;e<16;)make_top_img_270351(e,l),e+=1;n+=1}}function make_middle_img_270328(){var l=get_context_239052(create_canvas_239364()),n=img_dims_270056.w;l.canvas.width=n,l.canvas.height=n,l.translate(n/2,n/2),middle_img_270073[0]=l.canvas}function make_bottom_img_270246(){var l=get_context_239052(create_canvas_239364()),n=img_radius_270055,e=img_dims_270056.w;l.canvas.width=e,l.canvas.height=e,l.translate(e/2,e/2),l.beginPath(),l.strokeStyle="hsl(0,0%,30%)",l.lineWidth=.2*n;var i=1;l:for(;i<=7;)i,l.moveTo(0,0),l.lineTo(0,n),l.stroke(),l.rotate(.8975979010256552),i+=1;l.closePath(),bottom_img_270074[0]=l.canvas}function init_270673(){make_top_imgs_270406(),make_middle_img_270328(),make_bottom_img_270246()}function lifetime_271168(l){var n;switch(l){case 0:n=15;break;case 1:n=30;break;case 2:n=60;break;case 3:n=12;break;case 5:n=30;break;case 4:n=60}return n}function to_float_186457(l){return l}function HEX2F_202817(l,n){return to_float_186457(l)/to_float_186457(n)}function hsl_271218(l,n,e,i){return nimCopy(null,(makeNimstrLit("hsla(")||[]).concat(cstrToNimstr(l+"")||[],makeNimstrLit(",")||[],cstrToNimstr(n+"")||[],makeNimstrLit("%,")||[],cstrToNimstr(e+"")||[],makeNimstrLit("%,")||[],cstrToNimstr(i+"")||[],makeNimstrLit(")")||[]),NTI176040)}function hsl_271269(l,n,e,i){return nimCopy(null,(makeNimstrLit("hsla(")||[]).concat(cstrToNimstr(l+"")||[],makeNimstrLit(",")||[],cstrToNimstr(n+"")||[],makeNimstrLit("%,")||[],cstrToNimstr(e+"")||[],makeNimstrLit("%,")||[],cstrToNimstr(i+"")||[],makeNimstrLit(")")||[]),NTI176040)}function get_img_colors_271202(l,n){var e={Field0:null,Field1:null};l:do{var i=HEX2F_202817(n,lifetime_271168(l));switch(l){case 0:var t=hsl_271218(5+40*i,100,70+30*i,.1+.9*i),a=hsl_271218(5+40*i,100,50+50*i,.5+.5*i);nimCopy(e,{Field0:nimCopy(null,t,NTI176040),Field1:nimCopy(null,a,NTI176040)},NTI271206);break l;case 1:var r=hsl_271269(200,100,70+30*i,1*i*i),u=hsl_271269(200,100,40+60*i,1*i);nimCopy(e,{Field0:nimCopy(null,r,NTI176040),Field1:nimCopy(null,u,NTI176040)},NTI271206);break l;case 2:var o=hsl_271269(200,100,100-30*i,1*(1-i)*(1-i)),s=hsl_271269(200,100,100-60*i,1*(1-i));nimCopy(e,{Field0:nimCopy(null,o,NTI176040),Field1:nimCopy(null,s,NTI176040)},NTI271206);break l;case 3:var _=hsl_271269(60,100,70+30*i,1*i),d=hsl_271269(60,90,60+40*i,.3+.7*i);nimCopy(e,{Field0:nimCopy(null,_,NTI176040),Field1:nimCopy(null,d,NTI176040)},NTI271206);break l;case 4:var c=hsl_271269(300,100,100-30*i,1*(1-i)*(1-i)),f=hsl_271269(300,100,100-60*i,1*(1-i));nimCopy(e,{Field0:nimCopy(null,c,NTI176040),Field1:nimCopy(null,f,NTI176040)},NTI271206);break l;case 5:var m=hsl_271269(300,100,70+30*i,1*i*i),p=hsl_271269(300,100,40+60*i,1*i);nimCopy(e,{Field0:nimCopy(null,m,NTI176040),Field1:nimCopy(null,p,NTI176040)},NTI271206);break l}}while(0);return e}function set_fill_style_271882(l,n){l.fillStyle=n}function make_boom_canvas_271843(l,n){var e=img_radius_271133,i=img_dims_271134.w,t=get_context_239052(create_canvas_239364()),a=get_img_colors_271202(l,n);t.imageSmoothingEnabled=!1,t.canvas.width=i,t.canvas.height=i,t.translate(i/2,i/2);var r=t.createRadialGradient(0,0,.75*e,0,0,e);r.addColorStop(0,toJSStr(a.Field0)),r.addColorStop(1,toJSStr(a.Field1)),t.beginPath(),set_fill_style_271882(t,r),t.arc(0,0,e,0,6.283185307179586,!1),t.fill(),null!=boom_imgs_271139[0][l]?boom_imgs_271139[0][l].push(t.canvas):boom_imgs_271139[0][l]=[t.canvas]}function init_271935(){var l=0,n=0;l:for(;n<=5;){var e;e=lifetime_271168(l=n);var i=0;n:for(;i<=e;)make_boom_canvas_271843(l,i),i+=1;n+=1}}function make_burster_img_273469(l,n){var e,i=null;l:do{switch(n){case 0:e=discrete_glow_colors_268683[l];break;default:e=discrete_evil_colors_268684[l]}var t=nimCopy(null,e,NTI268658),a=get_context_239052(create_canvas_239364()),r=img_dims_273147.w,u=img_radius_273146,o=u*(1-.65*HEX2F_202817(l,16)),s=u*(.3+.1*HEX2F_202817(l,16));a.imageSmoothingEnabled=!1,a.canvas.width=r,a.canvas.height=r,a.translate(r/2,r/2),a.beginPath(),a.strokeStyle=toJSStr(t.Field1),a.lineWidth=s,a.arc(0,0,o,0,6.283185307179586,!1),a.stroke(),a.beginPath(),a.strokeStyle=toJSStr(t.Field0),a.lineWidth=.5*s,a.arc(0,0,o,0,6.283185307179586,!1),a.stroke(),i=a.canvas;break l}while(0);return i}function make_bullet_img_273426(l,n){var e,i=null;l:do{switch(n){case 0:e=discrete_glow_colors_268683[l];break;default:e=discrete_evil_colors_268684[l]}var t=nimCopy(null,e,NTI268658),a=get_context_239052(create_canvas_239364()),r=img_dims_273147.w,u=img_radius_273146,o=u*(.6+.5*HEX2F_202817(l,16)),s=u*(.3-.15*HEX2F_202817(l,16)),_=.2*u*(1-.9*HEX2F_202817(l,16));a.imageSmoothingEnabled=!1,a.canvas.width=r,a.canvas.height=r,a.translate(r/2,r/2),a.beginPath(),a.fillStyle=toJSStr(t.Field0),a.strokeStyle=toJSStr(t.Field1),a.lineWidth=_,a.ellipse(0,0,o,s,0,0,6.283185307179586,!1),a.fill(),a.stroke(),i=a.canvas;break l}while(0);return i}function init_273499(){var l=0,n=0;l:for(;n<=1;){l=n;var e=0,i=0;n:for(;i<=1;){e=i;var t=0,a=0;e:for(;a<16;)t=a,bullet_imgs_273157[0][l][e][t]=1==l?make_burster_img_273469(t,e):make_bullet_img_273426(t,e),a+=1;i+=1}n+=1}}function circle_239268(l,n,e,i){l.arc(n,e,i,0,6.283185307179586,!1)}function make_vandal_img_274544(l,n){var e=null;l:do{var i=get_context_239052(create_canvas_239364()),t=nimCopy(null,-1==l?n:discrete_evil_colors_268684[l],NTI274547),a=img_radius_274202,r=img_dims_274203.w;i.canvas.width=r,i.canvas.height=r,i.translate(r/2,r/2),i.fillStyle=toJSStr(n.Field0),i.strokeStyle=toJSStr(n.Field1),i.lineWidth=.12*a,i.beginPath(),i.moveTo(.8*-a,a),i.bezierCurveTo(1.7*a,a,1.7*a,-a,.8*-a,-a),i.quadraticCurveTo(1.7*a,0,.8*-a,a),i.closePath(),i.fill(),i.stroke(),i.fillStyle=toJSStr(t.Field0),i.strokeStyle=toJSStr(t.Field1),i.lineWidth=.07*a,i.beginPath(),circle_239268(i,.25*-a,0,.25*a),i.fill(),i.stroke(),e=i.canvas;break l}while(0);return e}function make_ori_img_274598(l,n){var e=null;l:do{var i=get_context_239052(create_canvas_239364()),t=nimCopy(null,-1==l?n:discrete_evil_colors_268684[l],NTI274601),a=img_radius_274202,r=img_dims_274203.w;i.canvas.width=r,i.canvas.height=r,i.translate(r/2,r/2),i.strokeStyle=toJSStr(n.Field1),i.lineWidth=.35*a,i.beginPath(),circle_239268(i,0,0,.9*a),i.stroke(),i.strokeStyle=toJSStr(n.Field0),i.lineWidth=.2*a,i.beginPath(),circle_239268(i,0,0,.9*a),i.stroke(),i.fillStyle=toJSStr(n.Field0),i.strokeStyle=toJSStr(n.Field1),i.lineWidth=.07*a,i.beginPath(),i.ellipse(.85*a,0,.4*a,.2*a,0,0,6.283185307179586,!1),i.fill(),i.fillStyle=toJSStr(t.Field0),i.strokeStyle=toJSStr(t.Field1),i.lineWidth=.07*a,i.beginPath(),circle_239268(i,.85*-a,0,.3*a),i.fill(),i.stroke(),e=i.canvas;break l}while(0);return e}function make_trilobite_img_274640(l,n){var e=null;l:do{var i=get_context_239052(create_canvas_239364()),t=nimCopy(null,-1==l?n:discrete_evil_colors_268684[l],NTI274643),a=img_radius_274202,r=img_dims_274203.w;i.canvas.width=r,i.canvas.height=r,i.translate(r/2,r/2),i.fillStyle=toJSStr(n.Field0),i.strokeStyle=toJSStr(n.Field1),i.lineWidth=.08*a,i.beginPath(),i.moveTo(.8*-a,a),i.bezierCurveTo(1.7*a,a,1.7*a,-a,.8*-a,-a),i.quadraticCurveTo(2.3*a,0,.8*-a,a),i.closePath(),i.fill(),i.stroke();var u=.75*a,o=1.3*-u,s=1.38*u,_=1.79*u;i.beginPath(),i.moveTo(o,u),i.bezierCurveTo(s,u,s,-u,o,-u),i.quadraticCurveTo(_,0,o,u),i.closePath(),i.fill(),i.stroke();var d=.5*a,c=2*-d,f=.4*d,m=.3*d;i.beginPath(),i.moveTo(c,d),i.bezierCurveTo(f,d,f,-d,c,-d),i.quadraticCurveTo(m,0,c,d),i.closePath(),i.fill(),i.stroke(),i.fillStyle=toJSStr(t.Field0),i.strokeStyle=toJSStr(t.Field1),i.lineWidth=.07*a,i.beginPath(),circle_239268(i,.85*-a,0,.25*a),i.fill(),i.stroke(),e=i.canvas;break l}while(0);return e}function make_hooligan_img_274750(l,n,e){var i;switch(l){case 0:i=make_vandal_img_274544(n,e);break;case 1:i=make_ori_img_274598(n,e);break;case 2:i=make_trilobite_img_274640(n,e)}return i}function init_274770(){var l=0,n=0;l:for(;n<=2;){l=n;var e=0,i=0;n:for(;i<16;)e=i,present_imgs_274210[0][l][e]=make_hooligan_img_274750(l,e,{Field0:makeNimstrLit("rgb(160,195,255)"),Field1:makeNimstrLit("rgb(50,75,200)")}),i+=1;past_img_274214[0][l]=make_hooligan_img_274750(l,-1,{Field0:makeNimstrLit("rgba(250,0,175,0.25)"),Field1:makeNimstrLit("rgba(250,0,175,0.25)")}),future_img_274218[0][l]=make_hooligan_img_274750(l,-1,{Field0:makeNimstrLit("rgba(20,190,250,0.25)"),Field1:makeNimstrLit("rgba(20,190,250,0.25)")}),n+=1}}function make_pod_canvas_276360(l){var n=null;l:do{var e=nimCopy(null,discrete_glow_colors_268683[l],NTI268658),i=get_context_239052(create_canvas_239364()),t=loot_img_dims_276154.w,a=loot_img_radius_276153;i.imageSmoothingEnabled=!1,i.canvas.width=t,i.canvas.height=t,i.translate(t/2,t/2),i.beginPath(),i.lineWidth=.3*a,i.fillStyle="#FFFFFF",i.strokeStyle="#FF0000",i.ellipse(0,0,.8*a,a,0,0,6.283185307179586,!1),i.fill(),i.stroke(),emblem_fat_cross_269214(i,.8*a,makeNimstrLit("#FF0000")),i.beginPath(),i.fillStyle=toJSStr(e.Field0),i.strokeStyle=toJSStr(e.Field1),i.lineWidth=.2*a,i.arc(0,.85*a,a/3.5,0,6.283185307179586,!1),i.fill(),i.stroke(),i.beginPath(),i.fillStyle=toJSStr(e.Field0),i.strokeStyle=toJSStr(e.Field1),i.lineWidth=.2*a,i.arc(0,.85*-a,a/3.5,0,6.283185307179586,!1),i.fill(),i.stroke(),n=i.canvas;break l}while(0);return n}function make_gem_canvas_276399(l){var n=null;l:do{var e=nimCopy(null,discrete_glow_colors_268683[l],NTI268658),i=get_context_239052(create_canvas_239364()),t=loot_img_dims_276154.w,a=loot_img_radius_276153;i.imageSmoothingEnabled=!1,i.canvas.width=t,i.canvas.height=t,i.translate(t/2,t/2),i.beginPath(),i.fillStyle=toJSStr(e.Field0),i.rect(-a,-a,2*a,2*a),i.fill(),i.beginPath(),i.fillStyle=toJSStr(e.Field1),i.rect(-a,-a,a,a),i.fill(),i.beginPath(),i.rect(0,0,a,a),i.fill(),n=i.canvas;break l}while(0);return n}function init_276452(){var l=0,n=0;l:for(;n<16;)l=n,loot_imgs_276161[0][1][l]=make_pod_canvas_276360(l),loot_imgs_276161[0][0][l]=make_gem_canvas_276399(l),n+=1}function hsl_277195(l,n,e,i){return nimCopy(null,(makeNimstrLit("hsla(")||[]).concat(cstrToNimstr(l+"")||[],makeNimstrLit(",")||[],cstrToNimstr(n+"")||[],makeNimstrLit("%,")||[],cstrToNimstr(e+"")||[],makeNimstrLit("%,")||[],cstrToNimstr(i+"")||[],makeNimstrLit(")")||[]),NTI176040)}function get_colors_277180(l){var n={Field0:null,Field1:null};return nimCopy(n,{Field0:hsl_277195(30+30*l,100,70+30*l,1),Field1:hsl_271218(10+50*l,100,50+50*l,.1+.9*l)},NTI277183),n}function make_particle_canvas_277373(l){var n=img_radius_277128,e=img_dims_277129.w,i=get_context_239052(create_canvas_239364());i.imageSmoothingEnabled=!1,i.canvas.width=e,i.canvas.height=e,i.translate(e/2,e/2);var t=i.createRadialGradient(0,0,.5*n,0,0,n),a=get_colors_277180(HEX2F_202817(l,25));t.addColorStop(0,toJSStr(a.Field0)),t.addColorStop(1,toJSStr(a.Field1)),set_fill_style_271882(i,t),circle_239268(i,0,0,n),i.fill(),img_canvases_277134[0][l]=i.canvas}function init_277429(){var l=0;l:for(;l<=25;)make_particle_canvas_277373(l),l+=1}function make_player_img_278589(l,n){var e=null;l:do{var i=get_context_239052(create_canvas_239364()),t=nimCopy(null,-1==l?n:discrete_glow_colors_268683[l],NTI278592),a=img_radius_278425,r=img_dims_278427.w;i.canvas.width=r,i.canvas.height=r,i.translate(r/2,r/2),i.fillStyle=toJSStr(n.Field0),i.strokeStyle=toJSStr(n.Field1),i.lineWidth=.12*a,i.beginPath(),i.moveTo(0,a),i.bezierCurveTo(1.5*a,a,1.5*a,-a,0,-a),i.quadraticCurveTo(a/2,-a/4,-a,0),i.quadraticCurveTo(a/2,a/4,0,a),i.fill(),i.stroke(),i.lineWidth=.2*a,i.beginPath(),i.moveTo(a/2,-a/4),i.lineTo(a/2,a/4),i.stroke(),i.moveTo(.75*a,0),i.lineTo(.25*a,0),i.stroke(),i.closePath(),i.fillStyle=toJSStr(t.Field0),i.strokeStyle=toJSStr(t.Field1),i.lineWidth=.07*a,i.beginPath(),i.ellipse(a/12,-a/2,a/2,a/8,0,0,6.283185307179586,!1),i.fill(),i.stroke(),i.beginPath(),i.ellipse(a/12,a/2,a/2,a/8,0,0,6.283185307179586,!1),i.fill(),i.stroke(),e=i.canvas;break l}while(0);return e}function init_278699(){var l=0,n=0;l:for(;n<16;)l=n,player_imgs_278422[0][l]=make_player_img_278589(l,{Field0:makeNimstrLit("rgb(255,255,255)"),Field1:makeNimstrLit("rgb(255,0,0)")}),n+=1;player_past_img_278423[0]=make_player_img_278589(-1,{Field0:makeNimstrLit("rgba(250,0,175,0.25)"),Field1:makeNimstrLit("rgba(250,0,175,0.25)")}),player_future_img_278424[0]=make_player_img_278589(-1,{Field0:makeNimstrLit("rgba(20,190,250,0.25)"),Field1:makeNimstrLit("rgba(20,190,250,0.25)")})}function emblem_widget_269364(l,n,e){l.beginPath(),l.strokeStyle=toJSStr(e),l.lineWidth=.2*n,l.moveTo(-.2*n,-.125*n),l.lineTo(.475*n,-.125*n),l.moveTo(-.2*n,.125*n),l.lineTo(.475*n,.125*n),l.moveTo(-.475*n,-.375*n),l.lineTo(.15*n,-.375*n),l.lineTo(.15*n,.375*n),l.lineTo(-.375*n,.375*n),l.lineTo(-.375*n,-.375*n),l.stroke(),l.closePath()}function emblem_pipe_triangle_269256(l,n,e){l.beginPath(),l.lineWidth=.125*n,l.strokeStyle=toJSStr(e),l.moveTo(-.1*n,0),l.lineTo(-.1*n,.35*n),l.lineTo(.375*n,0),l.lineTo(-.1*n,-.35*n),l.lineTo(-.1*n,0),l.moveTo(.15*n,0),l.lineTo(-.45*n,0),l.stroke(),l.closePath()}function emblem_tee_bar_269160(l,n,e){l.beginPath(),l.lineWidth=.2*n,l.strokeStyle=toJSStr(e),l.moveTo(.375*n,-.4*n),l.lineTo(.375*n,.4*n),l.moveTo(.075*n,-.4*n),l.lineTo(.075*n,.4*n),l.moveTo(.075*n,0),l.lineTo(-.475*n,0),l.stroke(),l.closePath()}function emblem_shield_269316(l,n,e){l.beginPath(),l.fillStyle=toJSStr(e),l.moveTo(.4*n,.4*n),l.lineTo(.4*n,-.4*n),l.lineTo(0,-.4*n),l.lineTo(-.4*n,0),l.lineTo(0,.4*n),l.fill(),l.closePath()}function emblem_three_ellpises_269436(l,n,e){l.strokeStyle=toJSStr(e),l.lineWidth=.075*n,l.beginPath(),l.ellipse(0,0,.45*n,.15*n,0,0,6.283185307179586,!1),l.stroke(),l.closePath(),l.beginPath(),l.ellipse(0,0,.45*n,.15*n,1.0471975511965976,0,6.283185307179586,!1),l.stroke(),l.closePath(),l.beginPath(),l.ellipse(0,0,.45*n,.15*n,-1.0471975511965976,0,6.283185307179586,!1),l.stroke(),l.closePath()}function make_ship_canvas_282378(l,n,e){var i=null;l:do{var t=get_context_239052(create_canvas_239364()),a=nimCopy(null,-1==l?n:discrete_glow_colors_268683[l],NTI282381),r=img_radius_282154,u=img_dims_282155.w;if(t.canvas.width=u,t.canvas.height=u,t.translate(u/2,u/2),t.fillStyle=toJSStr(n.Field0),t.strokeStyle=toJSStr(n.Field1),t.lineWidth=.18*r,t.beginPath(),t.arc(0,0,r,0,6.283185307179586,!1),t.fill(),t.stroke(),-1!=l)switch(e){case 5:emblem_widget_269364(t,r,n.Field1);break;case 0:emblem_pipe_triangle_269256(t,r,n.Field1);break;case 3:emblem_fat_cross_269214(t,r,n.Field1);break;case 1:emblem_tee_bar_269160(t,r,n.Field1);break;case 4:emblem_shield_269316(t,r,n.Field1);break;case 2:emblem_three_ellpises_269436(t,r,n.Field1)}t.fillStyle=toJSStr(a.Field0),t.strokeStyle=toJSStr(a.Field1),t.lineWidth=.15*r,t.beginPath(),t.ellipse(.82*-r,0,.42*r,.25*r,0,0,6.283185307179586,!1),t.fill(),t.stroke(),i=t.canvas;break l}while(0);return i}function hull_colors_282193(l){var n,e={Field0:null,Field1:null};switch(l){case 0:n={Field0:makeNimstrLit("#FAFAFA"),Field1:makeNimstrLit("#FA00FA")};break;case 1:n={Field0:makeNimstrLit("#F0F0F0"),Field1:makeNimstrLit("#ED9800")};break;case 3:n={Field0:makeNimstrLit("#FFFFFF"),Field1:makeNimstrLit("#FF0000")};break;case 2:n={Field0:makeNimstrLit("#FFFFFF"),Field1:makeNimstrLit("#009696")};break;case 4:n={Field0:makeNimstrLit("#D9D9D9"),Field1:makeNimstrLit("#0000FF")};break;case 5:n={Field0:makeNimstrLit("#C8C8C8"),Field1:makeNimstrLit("#FF8000")}}return nimCopy(e,n,NTI282196),e}function init_282422(){var l=0,n=0;l:for(;n<=5;){l=n;var e=0,i=0;n:for(;i<16;)e=i,ship_imgs_282162[0][l][e]=make_ship_canvas_282378(e,hull_colors_282193(l),l),i+=1;n+=1}ship_past_img_282163[0]=make_ship_canvas_282378(-1,{Field0:makeNimstrLit("rgba(250,0,175,0.25)"),Field1:makeNimstrLit("rgba(250,0,175,0.25)")},3),ship_future_img_282164[0]=make_ship_canvas_282378(-1,{Field0:makeNimstrLit("rgba(20,190,250,0.25)"),Field1:makeNimstrLit("rgba(20,190,250,0.25)")},3)}function init_416399(l){l.font="10px Andale Mono",l.textAlign="center",l.textBaseline="middle"}function init_436700(l,n){var e,i;++excHandler,e=framePtr;try{var t=load_hi_score_417525();nimCopy(l[n].hiscore,t,NTI417531),rawEcho(makeNimstrLit("Loaded saved hiscores from localStorage.")),--excHandler}catch(l){var a=lastJSError;lastJSError=l,--excHandler,framePtr=e,rawEcho(makeNimstrLit("Could not load hiscores from localStorage.")),lastJSError=a}finally{framePtr=e}++excHandler,i=framePtr;try{var r,u={Field0:null,Field1:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]},o=[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];nimCopy(u,load_saved_scene_417571(),NTI417573),r=u.Field0,nimCopy(o,u.Field1,NTI279174),l[n].scene=r,l[n].timetarget=r,push_289449(l[n].timeline,r),l[n].mode=1,init_280907(o),rawEcho(makeNimstrLit("Loaded saved scene from localStorage.")),--excHandler}catch(l){a=lastJSError;lastJSError=l,--excHandler,framePtr=i,rawEcho(makeNimstrLit("Could not load saved scene from localStorage.")),init_280923(),lastJSError=a}finally{framePtr=i}init_270673(),init_271935(),init_273499(),init_274770(),init_276452(),init_277429(),init_278699(),init_282422(),init_416399(l[n].ctx)}function add_doc_event_listener_230135(l,n,e){document.addEventListener(l,n,e)}function imul_242968(l,n){var e=65535&l,i=65535&n;return(e*i>>>0)+(((l>>>0>>>16&65535)*i>>>0)+(e*(n>>>0>>>16&65535)>>>0)>>>0<<16)>>>0}function rotl32_243201(l,n){return l<<n|l>>>0>>>32-n}function murmur_hash_243237(l){var n=0;l:do{var e=null!=l?l.length:0,i=Math.trunc(e/4),t=0,a=0;n:for(;a<4*i;){var r=0,u=4;e:for(;0<u;)r=r<<8|l[a+(u-=1)];a+=4,r=rotl32_243201(r=imul_242968(r,3432918353),15),t=3864292196+(5*(t=rotl32_243201(t^=r=imul_242968(r,461845907),13))>>>0)>>>0}var o=0,s=Math.trunc(e%4);n:for(;0<s;)o=o<<8|l[a+(s-=1)];o=imul_242968(o,3432918353),t^=o=imul_242968(o=rotl32_243201(o,15),461845907),t^=e,t=imul_242968(t^=t>>>0>>>16,2246822507),t=imul_242968(t^=t>>>0>>>13,3266489909),n=0|(t^=t>>>0>>>16);break l}while(0);return n}function hash_244014(l){return murmur_hash_243237(l.slice(0,1+(null!=l?l.length-1:-1)))}function is_filled_249018(l){return!(0==l)}function next_try_249035(l,n){return l+1&n}function raw_get_429002(l,n,e,i){var t=0;l:do{if(e[i]=hash_244014(n),0==e[i]&&(e[i]=314159265),0==(null!=l.data?l.data.length:0)){t=-1;break l}var a=e[i]&(null!=l.data?l.data.length-1:-1);n:for(;is_filled_249018(l.data[a].Field0);){if(l.data[a].Field0==e[i]&&eqStrings(l.data[a].Field1,n)){t=a;break l}a=next_try_249035(a,null!=l.data?l.data.length-1:-1)}t=-1-a}while(0);return t}function must_rehash_249053(l,n){return 2*l<3*n||l-n<4}function raw_insert_431322(l,n,e,i,t,a,r){n[e][r].Field1=nimCopy(null,i,NTI176040),n[e][r].Field2=t,n[e][r].Field0=a}function enlarge_430348(l){var n=null;n=new Array(2*(null!=l.data?l.data.length:0));for(var e=0;e<2*(null!=l.data?l.data.length:0);++e)n[e]={Field0:0,Field1:null,Field2:0};var i=l.data;l.data=n;var t,a=0;t=null!=(n=i)?n.length-1:-1;var r=0;l:for(;r<=t;){var u=n[a=r].Field0;if(is_filled_249018(u)){var o=u&(null!=l.data?l.data.length-1:-1);n:for(;is_filled_249018(l.data[o].Field0);)o=next_try_249035(o,null!=l.data?l.data.length-1:-1);raw_insert_431322(l,l,"data",n[a].Field1,n[a].Field2,u,o)}r+=1}}function raw_get_known_hc_431843(l,n,e){var i=0;l:do{if(0==(null!=l.data?l.data.length:0)){i=-1;break l}var t=e&(null!=l.data?l.data.length-1:-1);n:for(;is_filled_249018(l.data[t].Field0);){if(l.data[t].Field0==e&&eqStrings(l.data[t].Field1,n)){i=t;break l}t=next_try_249035(t,null!=l.data?l.data.length-1:-1)}i=-1-t}while(0);return i}function has_key_or_put_428495(l,n,e){var i=!1;if(0==(null!=l.data?l.data.length:0)){l.counter=0,l.data=new Array(64);for(var t=0;t<64;++t)l.data[t]={Field0:0,Field1:null,Field2:0}}var a=[0],r=raw_get_429002(l,n,a,0);if(r<0){if(i=!1,0==(null!=l.data?l.data.length:0)){l.counter=0,l.data=new Array(64);for(t=0;t<64;++t)l.data[t]={Field0:0,Field1:null,Field2:0}}must_rehash_249053(null!=l.data?l.data.length:0,l.counter)&&(enlarge_430348(l),r=raw_get_known_hc_431843(l,n,a[0])),raw_insert_431322(l,l,"data",n,e,a[0],r=-1-r),l.counter+=1}else i=!0;return i}function keydown_428414(l,n,e){has_key_or_put_428495(l[n].inputs,cstrToNimstr(e.key),0)}function HEX5BHEX5DHEX3D_432658(l,n,e){if(0==(null!=l.data?l.data.length:0)){l.counter=0,l.data=new Array(64);for(var i=0;i<64;++i)l.data[i]={Field0:0,Field1:null,Field2:0}}var t=[0],a=raw_get_429002(l,n,t,0);if(0<=a)l.data[a].Field2=e;else{if(0==(null!=l.data?l.data.length:0)){l.counter=0,l.data=new Array(64);for(i=0;i<64;++i)l.data[i]={Field0:0,Field1:null,Field2:0}}must_rehash_249053(null!=l.data?l.data.length:0,l.counter)&&(enlarge_430348(l),a=raw_get_known_hc_431843(l,n,t[0])),raw_insert_431322(l,l,"data",n,e,t[0],a=-1-a),l.counter+=1}}function keyup_432537(l,n,e){HEX5BHEX5DHEX3D_432658(l[n].inputs,cstrToNimstr(e.key),2)}function raf_dt_230057(l){!function n(e){var i=e-raf_time_230043[0];raf_time_230043[0]=e,l(i),raf_token_230042[0]=window.requestAnimationFrame(n)}(0)}function len_434313(l){return l.counter}function save_hi_score_417475(l){localStorage.setItem("nimSpaceRocks-hiscore",Flatted.stringify(l.hiscore))}function update_hi_score_427935(l,n){var e;l[n].hiscore[0]=nimMax(l[n].hiscore[0],l[n].scene.delivered[1]),l[n].hiscore[1]=nimMax(l[n].hiscore[1],l[n].scene.delivered[0]),l[n].hiscore[2]=nimMax(l[n].hiscore[2],l[n].scene.rockScore),l[n].hiscore[3]=nimMax(l[n].hiscore[3],l[n].scene.shipScore),++excHandler,e=framePtr;try{rawEcho(makeNimstrLit("Saving hiscore")),save_hi_score_417475(l[n]),--excHandler}catch(l){var i=lastJSError;lastJSError=l,--excHandler,framePtr=e,rawEcho(makeNimstrLit("Local storage could not be accessed.")),lastJSError=i}finally{framePtr=e}}function max_188537(l,n){return n<=l||!(n==n)?l:n}function command_278384(l,n,e){switch(e){case 3:l[n].acc=.15,l[n].glow=max_188537(l[n].glow,25);break;case 4:l[n].acc=-.05,l[n].glow=max_188537(l[n].glow,25);break;case 5:l[n].acc=0;break;case 0:l[n].va=.1;break;case 1:l[n].va=-.1;break;case 2:l[n].va=0;break;case 9:l[n].firing=!0;break;case 10:l[n].firing=!1;break;case 6:l[n].strafe=-.05,l[n].glow=max_188537(l[n].glow,25);break;case 7:l[n].strafe=.05,l[n].glow=max_188537(l[n].glow,25);break;case 8:l[n].strafe=0}}function is_now_289123(){return 0==timetarget_289109[0]}function HEX5BHEX5D_290379(l,n){var e=null,i=0;l:do{e=l.data,i=l.head+n&l.mask;break l}while(0);return[e,i]}function get_time_target_string_290330(l){var n;return(n=HEX5BHEX5D_290379(l,timetarget_289109[0]),n)[0][n[1]]}function get_time_target_290444(l){return Flatted.parse(get_time_target_string_290330(l))}function stop_278402(l,n){command_278384(l,n,5),command_278384(l,n,2),command_278384(l,n,10)}function clear_290770(l){var n,e=null,i=0,t=l.head;n=l.count;var a=0;l:for(;a<n;)a,(e=l.data)[i=t]=genericReset(e[i],NTI176042),t=t+1&l.mask,a+=1;l.count=0,l.tail=l.head}function shrink_290751(l,n,e){l:do{if(l.count<n+e){clear_290770(l);break l}var i=0;n:for(;i<n;)i,l.data[l.head]=genericReset(l.data[l.head],NTI176042),l.head=l.head+1&l.mask,i+=1;var t=0;n:for(;t<e;)t,l.data[l.tail]=genericReset(l.data[l.tail],NTI176042),l.tail=l.tail-1&l.mask,t+=1;l.count-=n+e}while(0)}function stop_time_traveling_290736(l){shrink_290751(l,timetarget_289109[0],0),timetarget_289109[0]=0}function save_current_scene_417496(l){var n=is_now_289123()?Flatted.stringify(l.scene):get_time_target_string_290330(l.timeline);localStorage.setItem("nimSpaceRocks-scene",n),localStorage.setItem("nimSpaceRocks-rockPoints",Flatted.stringify(rock_points_279184[0]))}function apply_key_down_434022(l,n,e){var i;l:do{switch(l[n].mode){case 0:switch(toJSStr(e)){case"p":case"Enter":l[n].mode=1,update_hi_score_427935(l,n);break;case" ":l[n].scene.player.alive?command_278384(l[n].scene,"player",9):(l[n].mode=1,update_hi_score_427935(l,n));break;case"a":case"ArrowLeft":command_278384(l[n].scene,"player",0);break;case"d":case"ArrowRight":command_278384(l[n].scene,"player",1);break;case"w":case"ArrowUp":command_278384(l[n].scene,"player",3);break;case"s":case"ArrowDown":command_278384(l[n].scene,"player",4);break;case"q":command_278384(l[n].scene,"player",6);break;case"e":command_278384(l[n].scene,"player",7);break;default:break l}break;case 1:switch(toJSStr(e)){case"p":case"Enter":case" ":l[n].mode=0,l[n].drawHelp=!1,is_now_289123()||(l[n].scene=get_time_target_290444(l[n].timeline)),stop_278402(l[n].scene,"player"),stop_time_traveling_290736(l[n].timeline),!!eqStrings(e,makeNimstrLit(" "))&&l[n].scene.player.alive&&command_278384(l[n].scene,"player",9);break;case"a":case"ArrowLeft":l[n].timetraveldir=0;break;case"d":case"ArrowRight":l[n].timetraveldir=1;break;case"s":case"ArrowDown":++excHandler,i=framePtr;try{rawEcho(makeNimstrLit("Saving current scene")),save_current_scene_417496(l[n]),--excHandler}catch(l){var t=lastJSError;lastJSError=l,--excHandler,framePtr=i,rawEcho(makeNimstrLit("Local storage could not be accessed.")),lastJSError=t}finally{framePtr=i}break;default:break l}}}while(0)}function mlog_434094(l,n){console.log(toJSStr(n),":",l)}function go_to_now_289139(){timetarget_289109[0]=0}function apply_key_up_434089(l,n,e){l:do{switch(l[n].mode){case 0:switch(toJSStr(e)){case"l":mlog_434094(l[n],makeNimstrLit("game state"));break;case" ":command_278384(l[n].scene,"player",10);break;case"d":case"a":case"ArrowLeft":case"ArrowRight":command_278384(l[n].scene,"player",2);break;case"w":case"s":case"ArrowDown":case"ArrowUp":command_278384(l[n].scene,"player",5);break;case"q":case"e":command_278384(l[n].scene,"player",8);break;case"Escape":go_to_now_289139(),init_280923();var i=new_game_417088(l[n].ctx);push_289449(i.timeline,i.scene),i.mode=1,nimCopy(i.inputs,l[n].inputs,NTI417047),nimCopy(i.hiscore,l[n].hiscore,NTI417063),l[n]=i;break;default:break l}break;case 1:switch(toJSStr(e)){case"l":mlog_434094(l[n],makeNimstrLit("game state"));break;case"d":case"a":case"ArrowLeft":case"ArrowRight":l[n].timetraveldir=2;break;case"Escape":go_to_now_289139();var t=new_game_417088(l[n].ctx);init_280923(),push_289449(t.timeline,t.scene),t.mode=1,nimCopy(t.inputs,l[n].inputs,NTI417047),nimCopy(t.hiscore,l[n].hiscore,NTI417063),l[n]=t}}}while(0)}function is_empty_249001(l){return 0==l}function del_435107(l,n){var e=raw_get_429002(l,n,[0],0),i=null!=l.data?l.data.length-1:-1;if(0<=e){l.counter-=1;l:do{n:for(;;){0;var t=e,a=t;l.data[e].Field0=0,l.data[e].Field1=nimCopy(null,null,NTI176040),l.data[e].Field2=0;e:do{i:for(;;){if(e=e+1&i,is_empty_249001(l.data[e].Field0))break l;if(!(!!(!!((a=l.data[e].Field0&i)<=e&&t<a)||t<a&&e<t)||e<t&&a<=e))break e}}while(0);nimCopy(l.data[t],l.data[e],NTI417053)}}while(0)}}function apply_inputs_434157(l,n){var e,i=[],t=null,a=null,r=0,u=(len_434313(l[n].inputs),0);e=null!=l[n].inputs.data?l[n].inputs.data.length-1:-1;var o=0;l:for(;o<=e;){if(u=o,is_filled_249018(l[n].inputs.data[u].Field0)){t=l[n].inputs.data[u].Field1,a=l[n].inputs.data[u],r="Field2";n:do{switch(a[r]){case 0:apply_key_down_434022(l,n,t),a[r]=1;break;case 2:apply_key_up_434089(l,n,t);var s=nimCopy(null,t,NTI176040);null!=i?i.push(s):i=[s];break;default:break n}}while(0)}o+=1}var _=null,d=0,c=null!=i?i.length:0;l:for(;d<c;)_=i[d],del_435107(l[n].inputs,_),d+=1}function HEX2BHEX3D_270186(l,n,e){l[n]=l[n]+e}function dr_271185(l){var n;switch(l){case 0:n=5;break;case 1:n=3.5;break;case 2:n=-3.5;break;case 3:n=2.5;break;case 5:n=3.5;break;case 4:n=-4}return n}function update_271527(l){var n=!1;l:do{if(l.life<1){n=!1;break l}l.life-=1,HEX2BHEX3D_270186(l,"r",dr_271185(l.kind)),n=!0;break l}while(0);return n}function delete_indices_417823(l,n,e){l:do{if(0==(null!=e?e.length:0))break l;var i=(null!=l[n]?l[n].length:0)-(null!=e?e.length:0),t=e[0],a=t+1,r=1;n:for(;t<i;){e:for(;r<(null!=e?e.length:0)&&a==e[r];)a+=1,r+=1;nimCopy(l[n][t],l[n][a],NTI271111),t+=1,a+=1}if(null===l[n]&&(l[n]=[]),l[n].length<i)for(var u=l[n].length;u<i;++u)l[n].push({x:0,y:0,vx:0,vy:0,a:0,va:0,r:0,life:0,kind:0,edge:0});else l[n].length=i}while(0)}function update_417639(l,n){var e=[],i=0,t=0,a=null!=l[n]?l[n].length:0;l:for(;t<a;)i=t,update_271527(l[n][t])||(null!=e?e.push(i):e=[i]),t+=1;delete_indices_417823(l,n,e)}function update_270181(l,n){var e=!1;l:do{HEX2BHEX3D_270186(l[n],"a1",l[n].va1),HEX2BHEX3D_270186(l[n],"a2",l[n].va2),l[n].glow=nimMax(0,l[n].glow-1),e=!0;break l}while(0);return e}function delete_indices_419623(l,n,e){l:do{if(0==(null!=e?e.length:0))break l;var i=(null!=l[n]?l[n].length:0)-(null!=e?e.length:0),t=e[0],a=t+1,r=1;n:for(;t<i;){e:for(;r<(null!=e?e.length:0)&&a==e[r];)a+=1,r+=1;l[n][t]=l[n][a],t+=1,a+=1}if(null===l[n]&&(l[n]=[]),l[n].length<i)for(var u=l[n].length;u<i;++u)l[n].push(null);else l[n].length=i}while(0)}function update_419500(l,n){var e=[],i=0,t=0,a=null!=l[n]?l[n].length:0;l:for(;t<a;)i=t,update_270181(l[n],t)||(null!=e?e.push(i):e=[i]),t+=1;delete_indices_419623(l,n,e)}function wrap_266067(l,n){var e=0;l:do{if(l<0){e=l+n;break l}if(n<l){e=l-n;break l}e=l;break l}while(0);return e}function wrap_x_268285(l){return wrap_266067(l,800)}function wrap_y_268302(l){return wrap_266067(l,545.4545454545455)}function wrap_obj_277306(l,n){l[n].x=wrap_x_268285(l[n].x),l[n].y=wrap_y_268302(l[n].y)}function drag_266120(l,n){return l*(1-n)}function drag_277163(l){return.08,.08}function drag_277324(l,n){l[n].vx=drag_266120(l[n].vx,drag_277163(l[n])),l[n].vy=drag_266120(l[n].vy,drag_277163(l[n]))}function update_277281(l,n){var e=!1;l:do{if(l[n].life<1){e=!1;break l}l[n].life-=1,HEX2BHEX3D_270186(l[n],"x",l[n].vx),HEX2BHEX3D_270186(l[n],"y",l[n].vy),wrap_obj_277306(l,n),drag_277324(l,n),e=!0;break l}while(0);return e}function delete_indices_420823(l,n,e){l:do{if(0==(null!=e?e.length:0))break l;var i=(null!=l[n]?l[n].length:0)-(null!=e?e.length:0),t=e[0],a=t+1,r=1;n:for(;t<i;){e:for(;r<(null!=e?e.length:0)&&a==e[r];)a+=1,r+=1;l[n][t]=l[n][a],t+=1,a+=1}if(null===l[n]&&(l[n]=[]),l[n].length<i)for(var u=l[n].length;u<i;++u)l[n].push(null);else l[n].length=i}while(0)}function update_420700(l,n){var e=[],i=0,t=0,a=null!=l[n]?l[n].length:0;l:for(;t<a;)i=t,update_277281(l[n],t)||(null!=e?e.push(i):e=[i]),t+=1;delete_indices_420823(l,n,e)}function wrap_a_266085(l){return wrap_266067(l,6.283185307179586)}function ballistics_273276(l,n){l[n].x=l[n].x+l[n].vx,l[n].y=l[n].y+l[n].vy,l[n].a=wrap_a_266085(l[n].a+l[n].va)}function wrap_obj_273294(l,n){l[n].x=wrap_x_268285(l[n].x),l[n].y=wrap_y_268302(l[n].y)}function update_273265(l,n){var e=!1;l:do{if(l[n].life<1){e=!1;break l}l[n].life-=1,ballistics_273276(l,n),wrap_obj_273294(l,n),1==l[n].ring&&HEX2BHEX3D_270186(l[n],"r",.24),e=!0;break l}while(0);return e}function delete_indices_422023(l,n,e){l:do{if(0==(null!=e?e.length:0))break l;var i=(null!=l[n]?l[n].length:0)-(null!=e?e.length:0),t=e[0],a=t+1,r=1;n:for(;t<i;){e:for(;r<(null!=e?e.length:0)&&a==e[r];)a+=1,r+=1;l[n][t]=l[n][a],t+=1,a+=1}if(null===l[n]&&(l[n]=[]),l[n].length<i)for(var u=l[n].length;u<i;++u)l[n].push(null);else l[n].length=i}while(0)}function update_421900(l,n){var e=[],i=0,t=0,a=null!=l[n]?l[n].length:0;l:for(;t<a;)i=t,update_273265(l[n],t)||(null!=e?e.push(i):e=[i]),t+=1;delete_indices_422023(l,n,e)}function accelerate_274370(l,n){if(0!=l[n].acc){var e=l[n].acc*Math.cos(l[n].a),i=-l[n].acc*Math.sin(l[n].a);HEX2BHEX3D_270186(l[n],"vx",e),HEX2BHEX3D_270186(l[n],"vy",i)}}function ballistics_274414(l,n){l[n].x=l[n].x+l[n].vx,l[n].y=l[n].y+l[n].vy,l[n].a=wrap_a_266085(l[n].a+l[n].va)}function drag_274432(l,n){l[n].vx=drag_266120(l[n].vx,l[n].drag),l[n].vy=drag_266120(l[n].vy,l[n].drag)}function wrap_obj_274450(l,n){l[n].x=wrap_x_268285(l[n].x),l[n].y=wrap_y_268302(l[n].y)}function get_burst_shots_274279(l){var n;switch(l){case 0:n=3;break;case 1:n=4;break;case 2:n=3}return n}function update_274365(l,n){var e=!1;l:do{accelerate_274370(l,n),ballistics_274414(l,n),drag_274432(l,n),wrap_obj_274450(l,n),l[n].glow=nimMax(0,l[n].glow-1),0<l[n].burstShots&&0==l[n].cd?(l[n].cd=6,l[n].burstShots-=1,l[n].glow=150):l[n].cd=nimMax(0,l[n].cd-1),0==l[n].burstPause?(l[n].burstShots=get_burst_shots_274279(l[n].kind),l[n].burstPause=180):l[n].burstPause=nimMax(0,l[n].burstPause-1),e=!0;break l}while(0);return e}function delete_indices_423223(l,n,e){l:do{if(0==(null!=e?e.length:0))break l;var i=(null!=l[n]?l[n].length:0)-(null!=e?e.length:0),t=e[0],a=t+1,r=1;n:for(;t<i;){e:for(;r<(null!=e?e.length:0)&&a==e[r];)a+=1,r+=1;l[n][t]=l[n][a],t+=1,a+=1}if(null===l[n]&&(l[n]=[]),l[n].length<i)for(var u=l[n].length;u<i;++u)l[n].push(null);else l[n].length=i}while(0)}function update_423107(l,n){var e=[],i=0,t=0,a=null!=l[n]?l[n].length:0;l:for(;t<a;)i=t,update_274365(l[n],t)||(null!=e?e.push(i):e=[i]),t+=1;delete_indices_423223(l,n,e)}function ballistics_276216(l,n){l[n].x=l[n].x+l[n].vx,l[n].y=l[n].y+l[n].vy,l[n].a=wrap_a_266085(l[n].a+l[n].va)}function drag_276234(l,n,e){l[n].vx=drag_266120(l[n].vx,e),l[n].vy=drag_266120(l[n].vy,e)}function wrap_obj_276253(l,n){l[n].x=wrap_x_268285(l[n].x),l[n].y=wrap_y_268302(l[n].y)}function update_276205(l,n){var e=!1;l:do{if(l[n].life<1){e=!1;break l}l[n].life-=1,ballistics_276216(l,n),drag_276234(l,n,.003),wrap_obj_276253(l,n),e=!0;break l}while(0);return e}function delete_indices_424423(l,n,e){l:do{if(0==(null!=e?e.length:0))break l;var i=(null!=l[n]?l[n].length:0)-(null!=e?e.length:0),t=e[0],a=t+1,r=1;n:for(;t<i;){e:for(;r<(null!=e?e.length:0)&&a==e[r];)a+=1,r+=1;l[n][t]=l[n][a],t+=1,a+=1}if(null===l[n]&&(l[n]=[]),l[n].length<i)for(var u=l[n].length;u<i;++u)l[n].push(null);else l[n].length=i}while(0)}function update_424300(l,n){var e=[],i=0,t=0,a=null!=l[n]?l[n].length:0;l:for(;t<a;)i=t,update_276205(l[n],t)||(null!=e?e.push(i):e=[i]),t+=1;delete_indices_424423(l,n,e)}function ballistics_279994(l,n){l[n].x=l[n].x+l[n].vx,l[n].y=l[n].y+l[n].vy,l[n].a=wrap_a_266085(l[n].a+l[n].va)}function wrap_obj_280012(l,n){l[n].x=wrap_x_268285(l[n].x),l[n].y=wrap_y_268302(l[n].y)}function update_279989(l,n){var e=!1;l:do{ballistics_279994(l,n),wrap_obj_280012(l,n),e=!0;break l}while(0);return e}function delete_indices_425623(l,n,e){l:do{if(0==(null!=e?e.length:0))break l;var i=(null!=l[n]?l[n].length:0)-(null!=e?e.length:0),t=e[0],a=t+1,r=1;n:for(;t<i;){e:for(;r<(null!=e?e.length:0)&&a==e[r];)a+=1,r+=1;l[n][t]=l[n][a],t+=1,a+=1}if(null===l[n]&&(l[n]=[]),l[n].length<i)for(var u=l[n].length;u<i;++u)l[n].push(null);else l[n].length=i}while(0)}function update_425500(l,n){var e=[],i=0,t=0,a=null!=l[n]?l[n].length:0;l:for(;t<a;)i=t,update_279989(l[n],t)||(null!=e?e.push(i):e=[i]),t+=1;delete_indices_425623(l,n,e)}function ballistics_282294(l,n){l[n].x=l[n].x+l[n].vx,l[n].y=l[n].y+l[n].vy,l[n].a=wrap_a_266085(l[n].a+l[n].va)}function update_282289(l,n){var e,i=!1;l:do{ballistics_282294(l,n),e=l[n].glow<1?45:nimMax(0,l[n].glow-1),l[n].glow=e,i=!0;break l}while(0);return i}function delete_indices_426823(l,n,e){l:do{if(0==(null!=e?e.length:0))break l;var i=(null!=l[n]?l[n].length:0)-(null!=e?e.length:0),t=e[0],a=t+1,r=1;n:for(;t<i;){e:for(;r<(null!=e?e.length:0)&&a==e[r];)a+=1,r+=1;l[n][t]=l[n][a],t+=1,a+=1}if(null===l[n]&&(l[n]=[]),l[n].length<i)for(var u=l[n].length;u<i;++u)l[n].push(null);else l[n].length=i}while(0)}function update_426700(l,n){var e=[],i=0,t=0,a=null!=l[n]?l[n].length:0;l:for(;t<a;)i=t,update_282289(l[n],t)||(null!=e?e.push(i):e=[i]),t+=1;delete_indices_426823(l,n,e)}function accelerate_278233(l,n){if(0!=l[n].acc){var e=l[n].acc*Math.cos(l[n].a),i=-l[n].acc*Math.sin(l[n].a);HEX2BHEX3D_270186(l[n],"vx",e),HEX2BHEX3D_270186(l[n],"vy",i)}}function accelerate_278277(l,n,e,i){var t,a,r={Field0:0,Field1:0};nimCopy(r,ratoxy_266199(e,i),NTI266203),t=r.Field0,a=r.Field1,HEX2BHEX3D_270186(l[n],"vx",t),HEX2BHEX3D_270186(l[n],"vy",a)}function ballistics_278313(l,n){l[n].x=l[n].x+l[n].vx,l[n].y=l[n].y+l[n].vy,l[n].a=wrap_a_266085(l[n].a+l[n].va)}function drag_278331(l,n){l[n].vx=drag_266120(l[n].vx,l[n].drag),l[n].vy=drag_266120(l[n].vy,l[n].drag)}function wrap_obj_278349(l,n){l[n].x=wrap_x_268285(l[n].x),l[n].y=wrap_y_268302(l[n].y)}function update_278229(l,n){var e;l:do{if(!l[n].alive)break l;accelerate_278233(l,n),0!=l[n].strafe&&accelerate_278277(l,n,l[n].strafe,1.5707963267948966-l[n].a),ballistics_278313(l,n),drag_278331(l,n),wrap_obj_278349(l,n),e=0!=l[n].acc?25:0,l[n].glow=max_188537(e,l[n].glow-1),!!l[n].firing&&0==l[n].cd?(l[n].cd=6,l[n].glow=max_188537(l[n].glow,45),l[n].multiShots=nimMax(0,l[n].multiShots-1),l[n].ringShots=nimMax(0,l[n].ringShots-1)):l[n].cd=max_188537(0,l[n].cd-1)}while(0)}function square_264066(l){return l*l}function cir_collide_291203(l,n,e,i,t,a){return square_264066(i-l)+square_264066(t-n)<square_264066(a+e)}function cir_collide_301427(l,n){return cir_collide_291203(l.x,l.y,l.r,n.x,n.y,n.r)}function delete_indices_301542(l,n,e){l:do{if(0==(null!=e?e.length:0))break l;var i=(null!=l[n]?l[n].length:0)-(null!=e?e.length:0),t=e[0],a=t+1,r=1;n:for(;t<i;){e:for(;r<(null!=e?e.length:0)&&a==e[r];)a+=1,r+=1;l[n][t]=l[n][a],t+=1,a+=1}if(null===l[n]&&(l[n]=[]),l[n].length<i)for(var u=l[n].length;u<i;++u)l[n].push(null);else l[n].length=i}while(0)}function find_297384(l,n){var e=0;l:do{var i=0;n:for(;i<(null!=l?l.length:0);){if(l[i]==n)break l;e+=1,i+=1}e=-1}while(0);return e}function contains_297377(l,n){var e=!1;l:do{e=0<=find_297384(l,n);break l}while(0);return e}function deduplicate_297287(l,n){var e=null;if(e=nimCopy(null,[],NTI297309),0<(null!=l?l.length:0))if(n){var i=l[0],t=nimCopy(null,i,NTI179404);null!=e?e.push(t):e=[t];var a,r=0;a=null!=l?l.length-1:-1;var u=1;l:for(;u<=a;){if(l[r=u]!=i){var o=nimCopy(null,i=l[r],NTI179404);null!=e?e.push(o):e=[o]}u+=1}}else{var s=0,_=0;l:for(;_<(null!=l?l.length:0);){if(!contains_297377(e,s=l[_])){var d=nimCopy(null,s,NTI179404);null!=e?e.push(d):e=[d]}_+=1}}return e}function new_seq_295724(l){var n=null;n=new Array(l);for(var e=0;e<l;++e)n[e]=0;return n}function HEX2A_246019(l,n){var e=n-1;return(l^e)-e}function merge_295816(l,n,e,i,t,a,r){l:do{if(HEX2A_246019(a(l[i],l[i+1]),r)<=0)break l;var u=e,o=0;n:for(;u<=i;)n[o]=l[u],o+=1,u+=1;var s=0,_=e;n:for(;_<u&&u<=t;)HEX2A_246019(a(n[s],l[u]),r)<=0?(l[_]=n[s],s+=1):(l[_]=l[u],u+=1),_+=1;n:for(;_<u;)l[_]=n[s],_+=1,s+=1}while(0)}function sort_295785(l,n,e){var i=null!=l?l.length:0,t=null;t=new Array(Math.trunc(i/2));for(var a=0;a<Math.trunc(i/2);++a)t[a]=0;var r=1;l:for(;r<i;){var u=i-1-r;n:for(;0<=u;)merge_295816(l,t,nimMax(u-r+1,0),u,u+r,n,e),u-=2*r;r*=2}}function sorted_295707(l,n,e){var i=null;i=nimCopy(null,new_seq_295724(null!=l?l.length:0),NTI295728);var t,a=0;t=null!=l?l.length-1:-1;var r=0;l:for(;r<=t;)i[a=r]=l[a],r+=1;return sort_295785(i,n,e),i}function cmp_295684(l,n){var e=0;l:do{if(l==n){e=0;break l}if(l<n){e=-1;break l}e=1;break l}while(0);return e}function sorted_295673(l,n){return nimCopy(null,sorted_295707(l,cmp_295684,n),NTI295717)}function delete_indices_299065(l,n,e){l:do{if(0==(null!=e?e.length:0))break l;var i=(null!=l[n]?l[n].length:0)-(null!=e?e.length:0),t=e[0],a=t+1,r=1;n:for(;t<i;){e:for(;r<(null!=e?e.length:0)&&a==e[r];)a+=1,r+=1;l[n][t]=l[n][a],t+=1,a+=1}if(null===l[n]&&(l[n]=[]),l[n].length<i)for(var u=l[n].length;u<i;++u)l[n].push(null);else l[n].length=i}while(0)}function get_calf_number_279648(l,n){var e;switch(l){case 0:e=n<.1?0:n<.9?1:2;break;case 1:e=n<.5?1:2;break;case 2:e=n<.1?1:n<.9?2:3;break;case 3:e=n<.5?2:3;break;case 4:e=n<.1?2:n<.9?3:4;break;case 5:e=n<.5?3:4;break;case 6:e=n<.1?3:n<.9?4:5}return e}function make_calf_279906(l,n){var e,i,t={Field0:0,Field1:0};nimCopy(t,ratoxy_266199(1,randang_267308()),NTI266203),e=t.Field0,i=t.Field1;var a,r,u={Field0:0,Field1:0};return nimCopy(u,ratoxy_266199(l.r/2,randang_267308()),NTI266203),a=u.Field0,r=u.Field1,new_rock_279778(l.x+a,l.y+r,l.a,l.vx+e,l.vy+i,l.va+randctr_268502(.025),l.mat,n,randi_267102(16))}function shrink_279337(l){return nimMax(l-1,0)}function add_calves_279937(l,n,e){l:do{if(0==e.size)break l;var i;i=get_calf_number_279648(e.mat,randf_267054());var t=0;n:for(;t<i;)t,null!=l[n]?l[n].push(make_calf_279906(e,shrink_279337(e.size))):l[n]=[make_calf_279906(e,shrink_279337(e.size))],t+=1}while(0)}function new_boom_302508(l,n,e){var i,t={x:0,y:0,vx:0,vy:0,a:0,va:0,r:0,life:0,kind:0,edge:0};switch(n){case 0:i=l.r;break;case 2:i=l.r-dr_271185(2)*lifetime_271168(2);break;case 1:case 3:case 5:i=l.r;break;case 4:i=l.r-dr_271185(2)*lifetime_271168(2)}var a=i;return nimCopy(t,{x:l.x,y:l.y,a:l.a,vx:0,vy:0,va:0,r:a,life:lifetime_271168(n),kind:n,edge:e},NTI271111),t}function new_particle_302588(l){var n,e,i={Field0:0,Field1:0};return nimCopy(i,ratoxy_266199(randf_267254(6,18),randang_267308()),NTI266203),n=i.Field0,e=i.Field1,{x:l.x,y:l.y,vx:l.vx+n,vy:l.vy+e,life:randi_267097(15,25)}}function add_particles_on_302536(l,n,e){var i=null!=l[n]?l[n].length:0,t=400<i?1:randi_267102(200<i?5:100<i?10:50<i?15:20),a=0;l:for(;a<t;)a,null!=l[n]?l[n].push(new_particle_302588(e)):l[n]=[new_particle_302588(e)],a+=1}function gem_chance_279631(l){var n;switch(l){case 0:n=.3;break;case 1:n=.15;break;case 2:n=.08;break;case 3:n=.04;break;case 4:n=.02;break;case 5:n=.01;break;case 6:n=.06}return n}function new_loot_302635(l,n){var e,i,t={Field0:0,Field1:0};return nimCopy(t,ratoxy_266199(randf_267171(3),randang_267308()),NTI266203),e=t.Field0,i=t.Field1,{x:l.x,y:l.y,a:l.a,vx:l.vx+e,vy:l.vy+i,va:l.va+randctr_268502(.17453292519943295),r:4,kind:n,life:1500}}function interactbulletrock_301171(l,n){var e,i=[],t=[],a=[],r=[],u=0,o=null,s=0,_=null!=(e=l[n].rocks)?e.length:0;l:for(;s<_;){u=s,o=e[s];var d,c=0,f=null,m=0,p=null!=(d=l[n].bullets)?d.length:0;n:for(;m<p;){if(c=m,cir_collide_301427(o,f=d[m])){var k=nimCopy(null,u,NTI179404);if(null!=t?t.push(k):t=[k],null!=i?i.push(o):i=[o],1!=f.ring){var h=nimCopy(null,c,NTI179404);null!=a?a.push(h):a=[h]}}m+=1}var N,g=0,y=null,v=0,T=null!=(N=l[n].bulletsEvil)?N.length:0;n:for(;v<T;){if(g=v,cir_collide_301427(o,y=N[v])){var I=nimCopy(null,u,NTI179404);if(null!=t?t.push(I):t=[I],null!=i?i.push(o):i=[o],1!=y.ring){var b=nimCopy(null,g,NTI179404);null!=r?r.push(b):r=[b]}}v+=1}s+=1}delete_indices_301542(l[n],"rocks",deduplicate_297287(sorted_295673(t,1),!0)),delete_indices_299065(l[n],"bullets",deduplicate_297287(sorted_295673(a,1),!0)),delete_indices_299065(l[n],"bulletsEvil",deduplicate_297287(sorted_295673(r,1),!0));var w=null,F=0,x=null!=i?i.length:0;l:for(;F<x;)w=i[F],add_calves_279937(l[n],"rocks",w),null!=l[n].booms?l[n].booms.push(new_boom_302508(w,0,1)):l[n].booms=[new_boom_302508(w,0,1)],add_particles_on_302536(l[n],"particles",w),randf_267054()<gem_chance_279631(w.mat)&&(null!=l[n].loots?l[n].loots.push(new_loot_302635(w,0)):l[n].loots=[new_loot_302635(w,0)]),F+=1;l[n].rockScore+=null!=i?i.length:0}function cir_collide_295616(l,n){return cir_collide_291203(l.x,l.y,l.r,n.x,n.y,n.r)}function delete_indices_297451(l,n,e){l:do{if(0==(null!=e?e.length:0))break l;var i=(null!=l[n]?l[n].length:0)-(null!=e?e.length:0),t=e[0],a=t+1,r=1;n:for(;t<i;){e:for(;r<(null!=e?e.length:0)&&a==e[r];)a+=1,r+=1;l[n][t]=l[n][a],t+=1,a+=1}if(null===l[n]&&(l[n]=[]),l[n].length<i)for(var u=l[n].length;u<i;++u)l[n].push(null);else l[n].length=i}while(0)}function new_boom_300055(l,n,e){var i,t={x:0,y:0,vx:0,vy:0,a:0,va:0,r:0,life:0,kind:0,edge:0};switch(n){case 0:i=l.r;break;case 2:i=l.r-dr_271185(2)*lifetime_271168(2);break;case 1:case 3:case 5:i=l.r;break;case 4:i=l.r-dr_271185(2)*lifetime_271168(2)}var a=i;return nimCopy(t,{x:l.x,y:l.y,a:l.a,vx:0,vy:0,va:0,r:a,life:lifetime_271168(n),kind:n,edge:e},NTI271111),t}function new_particle_300135(l){var n,e,i={Field0:0,Field1:0};return nimCopy(i,ratoxy_266199(randf_267254(6,18),randang_267308()),NTI266203),n=i.Field0,e=i.Field1,{x:l.x,y:l.y,vx:l.vx+n,vy:l.vy+e,life:randi_267097(15,25)}}function add_particles_on_300083(l,n,e){var i=null!=l[n]?l[n].length:0,t=400<i?1:randi_267102(200<i?5:100<i?10:50<i?15:20),a=0;l:for(;a<t;)a,null!=l[n]?l[n].push(new_particle_300135(e)):l[n]=[new_particle_300135(e)],a+=1}function new_loot_300182(l,n){var e,i,t={Field0:0,Field1:0};return nimCopy(t,ratoxy_266199(randf_267171(3),randang_267308()),NTI266203),e=t.Field0,i=t.Field1,{x:l.x,y:l.y,a:l.a,vx:l.vx+e,vy:l.vy+i,va:l.va+randctr_268502(.17453292519943295),r:4,kind:n,life:1500}}function interact_bullet_hooligan_295131(l,n){var e,i=[],t=[],a=[],r=0,u=null,o=0,s=null!=(e=l[n].hooligans)?e.length:0;l:for(;o<s;){r=o,u=e[o];var _,d=0,c=null,f=0,m=null!=(_=l[n].bullets)?_.length:0;n:for(;f<m;){if(d=f,cir_collide_295616(u,c=_[f])){var p=nimCopy(null,r,NTI179404);if(null!=t?t.push(p):t=[p],null!=i?i.push(u):i=[u],1!=c.ring){var k=nimCopy(null,d,NTI179404);null!=a?a.push(k):a=[k]}}f+=1}o+=1}delete_indices_297451(l[n],"hooligans",deduplicate_297287(sorted_295673(t,1),!0)),delete_indices_299065(l[n],"bullets",deduplicate_297287(sorted_295673(a,1),!0));var h=null,N=0,g=null!=i?i.length:0;l:for(;N<g;)h=i[N],null!=l[n].booms?l[n].booms.push(new_boom_300055(h,0,1)):l[n].booms=[new_boom_300055(h,0,1)],add_particles_on_300083(l[n],"particles",h),null!=l[n].loots?l[n].loots.push(new_loot_300182(h,1)):l[n].loots=[new_loot_300182(h,1)],null!=l[n].loots?l[n].loots.push(new_loot_300182(h,1)):l[n].loots=[new_loot_300182(h,1)],N+=1;l[n].shipScore+=null!=t?t.length:0}function cir_collide_303427(l,n){return cir_collide_291203(l.x,l.y,l.r,n.x,n.y,n.r)}function new_boom_303463(l,n,e){var i,t={x:0,y:0,vx:0,vy:0,a:0,va:0,r:0,life:0,kind:0,edge:0};switch(n){case 0:i=l.r;break;case 2:i=l.r-dr_271185(2)*lifetime_271168(2);break;case 1:case 3:case 5:i=l.r;break;case 4:i=l.r-dr_271185(2)*lifetime_271168(2)}var a=i;return nimCopy(t,{x:l.x,y:l.y,a:l.a,vx:0,vy:0,va:0,r:a,life:lifetime_271168(n),kind:n,edge:e},NTI271111),t}function new_particle_303543(l){var n,e,i={Field0:0,Field1:0};return nimCopy(i,ratoxy_266199(randf_267254(6,18),randang_267308()),NTI266203),n=i.Field0,e=i.Field1,{x:l.x,y:l.y,vx:l.vx+n,vy:l.vy+e,life:randi_267097(15,25)}}function add_particles_on_303491(l,n,e){var i=null!=l[n]?l[n].length:0,t=400<i?1:randi_267102(200<i?5:100<i?10:50<i?15:20),a=0;l:for(;a<t;)a,null!=l[n]?l[n].push(new_particle_303543(e)):l[n]=[new_particle_303543(e)],a+=1}function new_loot_284566(l,n){var e,i,t={Field0:0,Field1:0};return nimCopy(t,ratoxy_266199(randf_267171(3),randang_267308()),NTI266203),e=t.Field0,i=t.Field1,{x:l.x,y:l.y,a:l.a,vx:l.vx+e,vy:l.vy+i,va:l.va+randctr_268502(.17453292519943295),r:4,kind:n,life:1500}}function add_loot_284527(l,n,e){var i,t,a={Field0:0,Field1:0};switch(e.kind){case 0:i={Field0:4,Field1:0};break;case 1:i={Field0:2,Field1:2};break;case 3:i={Field0:5,Field1:0};break;case 5:i={Field0:2,Field1:3};break;case 2:i={Field0:3,Field1:3};break;case 4:i={Field0:5,Field1:1}}nimCopy(a,i,NTI284533),t=a.Field1;var r;r=randi_267102(a.Field0);var u=0;l:for(;u<=r;)u,null!=l[n]?l[n].push(new_loot_284566(e,1)):l[n]=[new_loot_284566(e,1)],u+=1;var o;o=randi_267102(t);var s=0;l:for(;s<=o;)s,null!=l[n]?l[n].push(new_loot_284566(e,0)):l[n]=[new_loot_284566(e,0)],s+=1}function delete_indices_303620(l,n,e){l:do{if(0==(null!=e?e.length:0))break l;var i=(null!=l[n]?l[n].length:0)-(null!=e?e.length:0),t=e[0],a=t+1,r=1;n:for(;t<i;){e:for(;r<(null!=e?e.length:0)&&a==e[r];)a+=1,r+=1;l[n][t]=l[n][a],t+=1,a+=1}if(null===l[n]&&(l[n]=[]),l[n].length<i)for(var u=l[n].length;u<i;++u)l[n].push(null);else l[n].length=i}while(0)}function interact_bullet_ship_303158(l,n){var e,i=[],t=[],a=0,r=null,u=0,o=null!=(e=l[n].ships)?e.length:0;l:for(;u<o;){a=u,r=e[u];n:do{var s,_=0,d=null,c=0,f=null!=(s=l[n].bulletsEvil)?s.length:0;e:for(;c<f;){if(_=c,cir_collide_303427(r,d=s[c])){var m=nimCopy(null,a,NTI179404);if(null!=i?i.push(m):i=[m],null!=l[n].booms?l[n].booms.push(new_boom_303463(r,0,0)):l[n].booms=[new_boom_303463(r,0,0)],add_particles_on_303491(l[n],"particles",r),add_loot_284527(l[n],"loots",r),1!=d.ring){var p=nimCopy(null,_,NTI179404);null!=t?t.push(p):t=[p]}break n}c+=1}}while(0);u+=1}delete_indices_303620(l[n],"ships",deduplicate_297287(sorted_295673(i,1),!0)),delete_indices_299065(l[n],"bulletsEvil",deduplicate_297287(sorted_295673(t,1),!0))}function angle_266278(l,n){return Math.atan2(n,l)}function angle_to_306192(l,n){return angle_266278(n.x-l.x,n.y-l.y)}function new_bullet_273186(l,n,e,i,t,a,r){return{x:l,y:n,a:t,vx:e+12*Math.cos(t),vy:i+12*-Math.sin(t),r:3,life:50,ring:a,evil:r,va:0}}function create_bullets_306220(l,n,e,i,t,a){null!=l[n]?l[n].push(new_bullet_273186(e.x,e.y,e.vx,e.vy,e.a,t,a)):l[n]=[new_bullet_273186(e.x,e.y,e.vx,e.vy,e.a,t,a)],i&&(null!=l[n]?l[n].push(new_bullet_273186(e.x,e.y,e.vx,e.vy,e.a+.20943951023931953,t,a)):l[n]=[new_bullet_273186(e.x,e.y,e.vx,e.vy,e.a+.20943951023931953,t,a)],null!=l[n]?l[n].push(new_bullet_273186(e.x,e.y,e.vx,e.vy,e.a-.20943951023931953,t,a)):l[n]=[new_bullet_273186(e.x,e.y,e.vx,e.vy,e.a-.20943951023931953,t,a)])}function cir_collide_306288(l,n){return cir_collide_291203(l.x,l.y,l.r,n.x,n.y,n.r)}function kill_278212(l,n){l[n].alive=!1,l[n].vx=0,l[n].vy=0,l[n].acc=0,l[n].strafe=0,l[n].firing=!1,l[n].multiShots=0,l[n].ringShots=0}function new_boom_306318(l,n,e){var i,t={x:0,y:0,vx:0,vy:0,a:0,va:0,r:0,life:0,kind:0,edge:0};switch(n){case 0:i=l.r;break;case 2:i=l.r-dr_271185(2)*lifetime_271168(2);break;case 1:case 3:case 5:i=l.r;break;case 4:i=l.r-dr_271185(2)*lifetime_271168(2)}var a=i;return nimCopy(t,{x:l.x,y:l.y,a:l.a,vx:0,vy:0,va:0,r:a,life:lifetime_271168(n),kind:n,edge:e},NTI271111),t}function new_particle_306398(l){var n,e,i={Field0:0,Field1:0};return nimCopy(i,ratoxy_266199(randf_267254(6,18),randang_267308()),NTI266203),n=i.Field0,e=i.Field1,{x:l.x,y:l.y,vx:l.vx+n,vy:l.vy+e,life:randi_267097(15,25)}}function add_particles_on_306346(l,n,e){var i=null!=l[n]?l[n].length:0,t=400<i?1:randi_267102(200<i?5:100<i?10:50<i?15:20),a=0;l:for(;a<t;)a,null!=l[n]?l[n].push(new_particle_306398(e)):l[n]=[new_particle_306398(e)],a+=1}function new_loot_284408(l,n){var e,i,t={Field0:0,Field1:0};return nimCopy(t,ratoxy_266199(randf_267171(3),randang_267308()),NTI266203),e=t.Field0,i=t.Field1,{x:l.x,y:l.y,a:l.a,vx:l.vx+e,vy:l.vy+i,va:l.va+randctr_268502(.17453292519943295),r:4,kind:n,life:1500}}function get_cargo_284388(l){var n=null;null!=(n=nimCopy(null,[],NTI284407))?n.push(new_loot_284408(l.player,1)):n=[new_loot_284408(l.player,1)];var e;e=l.cargo[1];var i=0;l:for(;i<e;)i,null!=n?n.push(new_loot_284408(l.player,1)):n=[new_loot_284408(l.player,1)],i+=1;var t;t=l.cargo[0];var a=0;l:for(;a<t;)a,null!=n?n.push(new_loot_284408(l.player,0)):n=[new_loot_284408(l.player,0)],a+=1;return n}function interact_hooligan_player_306146(l,n){l:do{if(!l[n].player.alive){var e,i=null,t=0,a=null!=(e=l[n].hooligans)?e.length:0;n:for(;t<a;)i=e[t],null!=l[n].booms?l[n].booms.push(new_boom_300055(i,5,1)):l[n].booms=[new_boom_300055(i,5,1)],t+=1;l[n].hooligans=nimCopy(null,[],NTI306184);break l}var r,u=null,o=0,s=null!=(r=l[n].hooligans)?r.length:0;n:for(;o<s;){if((u=r[o]).a=-angle_to_306192(u,l[n].player),0<u.burstShots&&0==u.cd)switch(u.kind){case 0:create_bullets_306220(l[n],"bulletsEvil",u,!1,0,1);break;case 1:create_bullets_306220(l[n],"bulletsEvil",u,!1,1,1);break;case 2:create_bullets_306220(l[n],"bulletsEvil",u,!0,0,1)}o+=1}var _,d=null,c=0,f=null!=(_=l[n].bulletsEvil)?_.length:0;n:for(;c<f;){if(d=_[c],!!cir_collide_306288(l[n].player,d)&&randf_267054()<.5){kill_278212(l[n],"player"),null!=l[n].booms?l[n].booms.push(new_boom_306318(l[n].player,0,1)):l[n].booms=[new_boom_306318(l[n].player,0,1)],add_particles_on_306346(l[n],"particles",l[n].player);var m,p=null,k=0,h=null!=(m=get_cargo_284388(l[n]))?m.length:0;e:for(;k<h;)p=m[k],null!=l[n].loots?l[n].loots.push(p):l[n].loots=[p],k+=1}c+=1}}while(0)}function prep_hooligan_275135(l,n,e){var i=Math.sqrt(e)/100;l[n].hooligan=new_hooligan_274329(i),l[n].spawnCount+=1,l[n].incoming=!1,l[n].threshold=next_threshold_275085(l[n].spawnCount),l[n].ticks=300}function interact_hooligan_timer_307067(l,n){0==l[n].hooliganTimer.ticks?(null!=l[n].hooligans?l[n].hooligans.push(l[n].hooliganTimer.hooligan):l[n].hooligans=[l[n].hooliganTimer.hooligan],prep_hooligan_275135(l[n],"hooliganTimer",l[n].rockScore)):l[n].hooliganTimer.incoming?(l[n].hooliganTimer.ticks-=1,l[n].hooliganTimer.ticks==lifetime_271168(4)&&(null!=l[n].booms?l[n].booms.push(new_boom_300055(l[n].hooliganTimer.hooligan,4,1)):l[n].booms=[new_boom_300055(l[n].hooliganTimer.hooligan,4,1)])):l[n].hooliganTimer.threshold<l[n].rockScore&&(l[n].hooliganTimer.incoming=!0)}function randi_267166(l){return Math.floor(randf_267171(l))}function randi_267156(l,n){return Math.floor(l)+randi_267166(n-l+1)}function new_rock_281115(l,n,e){var i=HEX2F_202817(e,100),t=max_188537(Math.floor(150-1*i),50),a=max_188537(Math.floor(50-1*i),10),r=0,u=0;l:for(;u<=4;)u,r+=randi_267156(a,t),u+=1;l[n].rock=spawn_rock_279869(i),l[n].ticks=r}function interact_rock_timer_312054(l,n){0==l[n].rockTimer.ticks?(null!=l[n].rocks?l[n].rocks.push(l[n].rockTimer.rock):l[n].rocks=[l[n].rockTimer.rock],new_rock_281115(l[n],"rockTimer",l[n].shipScore)):l[n].rockTimer.ticks-=1,l[n].rockTimer.ticks==lifetime_271168(2)&&(null!=l[n].booms?l[n].booms.push(new_boom_302508(l[n].rockTimer.rock,2,1)):l[n].booms=[new_boom_302508(l[n].rockTimer.rock,2,1)])}function sum_284276(l){var n=0;n=0;var e=0;if(e<=1)l:do{n:for(;;){if(n+=l[e],1<=e)break l;e+=1}}while(0);return n}function prep_ship_283122(l,n){var e=HEX2F_202817(n,100),i=max_188537(Math.floor(150-1*e),50),t=max_188537(Math.floor(50-1*e),10),a=0,r=0;l:for(;r<=4;)r,a+=randi_267156(t,i),r+=1;l.ship=new_rand_ship_282251(e),l.ticks=a}function interact_ship_timer_313054(l,n){if(0==l[n].shipTimer.ticks){null!=l[n].ships?l[n].ships.push(l[n].shipTimer.ship):l[n].ships=[l[n].shipTimer.ship];var e=sum_284276(l[n].delivered);prep_ship_283122(l[n].shipTimer,e)}else l[n].shipTimer.ticks-=1;l[n].shipTimer.ticks==lifetime_271168(2)&&(null!=l[n].booms?l[n].booms.push(new_boom_303463(l[n].shipTimer.ship,2,0)):l[n].booms=[new_boom_303463(l[n].shipTimer.ship,2,0)])}function is_off_edge_305125(l){return l.x<0||(800<l.x||(l.y<0||545.4545454545455<l.y))}function interact_edge_ship_305093(l,n){var e,i=[],t=0,a=null,r=0,u=null!=(e=l[n].ships)?e.length:0;l:for(;r<u;){if(t=r,is_off_edge_305125(a=e[r])){var o=nimCopy(null,t,NTI179404);null!=i?i.push(o):i=[o],null!=l[n].booms?l[n].booms.push(new_boom_303463(a,1,0)):l[n].booms=[new_boom_303463(a,1,0)],l[n].shipScore+=1}r+=1}delete_indices_303620(l[n],"ships",i)}function mag_266251(l,n){return Math.hypot(l,n)}function dist_308223(l,n,e,i){return mag_266251(e-l,i-n)}function dist_308216(l,n){return dist_308223(l.x,l.y,n.x,n.y)}function new_boom_308279(l,n,e){var i,t={x:0,y:0,vx:0,vy:0,a:0,va:0,r:0,life:0,kind:0,edge:0};switch(n){case 0:i=l.r;break;case 2:i=l.r-dr_271185(2)*lifetime_271168(2);break;case 1:case 3:case 5:i=l.r;break;case 4:i=l.r-dr_271185(2)*lifetime_271168(2)}var a=i;return nimCopy(t,{x:l.x,y:l.y,a:l.a,vx:0,vy:0,va:0,r:a,life:lifetime_271168(n),kind:n,edge:e},NTI271111),t}function delete_indices_308307(l,n,e){l:do{if(0==(null!=e?e.length:0))break l;var i=(null!=l[n]?l[n].length:0)-(null!=e?e.length:0),t=e[0],a=t+1,r=1;n:for(;t<i;){e:for(;r<(null!=e?e.length:0)&&a==e[r];)a+=1,r+=1;l[n][t]=l[n][a],t+=1,a+=1}if(null===l[n]&&(l[n]=[]),l[n].length<i)for(var u=l[n].length;u<i;++u)l[n].push(null);else l[n].length=i}while(0)}function interactlootplayer_308119(l,n){l:do{if(!l[n].player.alive)break l;var e,i=[],t=0,a=null,r=0,u=null!=(e=l[n].loots)?e.length:0;n:for(;r<u;){if(t=r,a=e[r],dist_308216(l[n].player,a)<=30){var o=nimCopy(null,t,NTI179404);null!=i?i.push(o):i=[o],l[n].cargo[a.kind]+=1,null!=l[n].booms?l[n].booms.push(new_boom_308279(a,3,1)):l[n].booms=[new_boom_308279(a,3,1)]}r+=1}delete_indices_308307(l[n],"loots",i);break l}while(0)}function cir_collide_291196(l,n){return cir_collide_291203(l.x,l.y,l.r,n.x,n.y,n.r)}function new_boom_291254(l,n,e){var i,t={x:0,y:0,vx:0,vy:0,a:0,va:0,r:0,life:0,kind:0,edge:0};switch(n){case 0:i=l.r;break;case 2:i=l.r-dr_271185(2)*lifetime_271168(2);break;case 1:case 3:case 5:i=l.r;break;case 4:i=l.r-dr_271185(2)*lifetime_271168(2)}var a=i;return nimCopy(t,{x:l.x,y:l.y,a:l.a,vx:0,vy:0,va:0,r:a,life:lifetime_271168(n),kind:n,edge:e},NTI271111),t}function interactbaseplayer_291185(l,n){var e;l:do{if(!l[n].player.alive)break l;var i,t=null,a=0,r=null!=(i=l[n].bases)?i.length:0;n:for(;a<r;){if(t=i[a],cir_collide_291196(l[n].player,t)){switch(t.kind){case 0:l[n].player.multiShots+=10*l[n].cargo[1],e=1;break;case 1:l[n].player.ringShots+=10*l[n].cargo[0],e=0}var u=e;0<l[n].cargo[u]&&(t.glow=60,null!=l[n].booms?l[n].booms.push(new_boom_291254(t,3,1)):l[n].booms=[new_boom_291254(t,3,1)],l[n].delivered[u]+=l[n].cargo[u],l[n].cargo[u]=0)}a+=1}}while(0)}function cir_collide_311158(l,n){return cir_collide_291203(l.x,l.y,l.r,n.x,n.y,n.r)}function interact_rock_ship_311119(l,n){var e,i=[],t=0,a=null,r=0,u=null!=(e=l[n].ships)?e.length:0;l:for(;r<u;){t=r,a=e[r];n:do{var o,s=0,_=null!=(o=l[n].rocks)?o.length:0;e:for(;s<_;){if(cir_collide_311158(a,o[s])){var d=nimCopy(null,t,NTI179404);null!=i?i.push(d):i=[d],null!=l[n].booms?l[n].booms.push(new_boom_303463(a,0,0)):l[n].booms=[new_boom_303463(a,0,0)],add_particles_on_303491(l[n],"particles",a),add_loot_284527(l[n],"loots",a);break n}s+=1}}while(0);r+=1}delete_indices_303620(l[n],"ships",i)}function create_bullets_292076(l,n,e,i,t,a){null!=l[n]?l[n].push(new_bullet_273186(e.x,e.y,e.vx,e.vy,e.a,t,a)):l[n]=[new_bullet_273186(e.x,e.y,e.vx,e.vy,e.a,t,a)],i&&(null!=l[n]?l[n].push(new_bullet_273186(e.x,e.y,e.vx,e.vy,e.a+.20943951023931953,t,a)):l[n]=[new_bullet_273186(e.x,e.y,e.vx,e.vy,e.a+.20943951023931953,t,a)],null!=l[n]?l[n].push(new_bullet_273186(e.x,e.y,e.vx,e.vy,e.a-.20943951023931953,t,a)):l[n]=[new_bullet_273186(e.x,e.y,e.vx,e.vy,e.a-.20943951023931953,t,a)])}function interact_bullet_player_292067(l,n){l:do{if(!l[n].player.alive)break l;if(!!l[n].player.firing&&0==l[n].player.cd){var e=0<l[n].player.ringShots?1:0;create_bullets_292076(l[n],"bullets",l[n].player,0<l[n].player.multiShots,e,0)}}while(0)}function cir_collide_310117(l,n){return cir_collide_291203(l.x,l.y,l.r,n.x,n.y,n.r)}function interactplayerrock_310106(l,n){l:do{if(!l[n].player.alive)break l;var e,i=null,t=0,a=null!=(e=l[n].rocks)?e.length:0;n:for(;t<a;){if(i=e[t],cir_collide_310117(l[n].player,i)){kill_278212(l[n],"player"),null!=l[n].booms?l[n].booms.push(new_boom_306318(l[n].player,0,1)):l[n].booms=[new_boom_306318(l[n].player,0,1)],add_particles_on_306346(l[n],"particles",l[n].player);var r,u=null,o=0,s=null!=(r=get_cargo_284388(l[n]))?r.length:0;e:for(;o<s;)u=r[o],null!=l[n].loots?l[n].loots.push(u):l[n].loots=[u],o+=1}t+=1}}while(0)}function update_417635(l,n){l[n].tick=l[n].tick+1,update_417639(l[n],"booms"),update_419500(l[n],"bases"),update_420700(l[n],"particles"),update_421900(l[n],"bullets"),update_421900(l[n],"bulletsEvil"),update_423107(l[n],"hooligans"),update_424300(l[n],"loots"),update_425500(l[n],"rocks"),update_426700(l[n],"ships"),update_278229(l[n],"player"),interactbulletrock_301171(l,n),interact_bullet_hooligan_295131(l,n),interact_bullet_ship_303158(l,n),interact_hooligan_player_306146(l,n),interact_hooligan_timer_307067(l,n),interact_rock_timer_312054(l,n),interact_ship_timer_313054(l,n),interact_edge_ship_305093(l,n),interactlootplayer_308119(l,n),interactbaseplayer_291185(l,n),interact_rock_ship_311119(l,n),interact_bullet_player_292067(l,n),interactplayerrock_310106(l,n)}function update_290246(l,n){0==Math.trunc(n.tick%5)&&push_289449(l,n)}function go_back_290264(l){timetarget_289109[0]=nimMin(timetarget_289109[0]+1,len_289186(l)-1)}function go_forward_290313(l){timetarget_289109[0]=nimMax(0,timetarget_289109[0]-1)}function update_427914(l,n){l:do{switch(l.dt=n,l.mode){case 0:update_417635(l,"scene"),l.scene.player.alive&&update_290246(l.timeline,l.scene);break;case 1:switch(l.timetraveldir){case 0:go_back_290264(l.timeline),l.timetarget=get_time_target_290444(l.timeline);break;case 1:go_forward_290313(l.timeline),l.timetarget=get_time_target_290444(l.timeline);break;default:break l}}}while(0)}function set_transform_240401(l,n,e){l.setTransform(1,0,0,1,n*pixel_ratio_240054,e*pixel_ratio_240054)}function draw_sprite_240541(l,n,e,i,t,a){set_transform_240401(l,e,i),l.rotate(-t),l.drawImage(n,-a.cx,-a.cy)}function ratio_to_glow_offset_268718(l){return 1<=l?15:l<=0?0:Math.floor(16*l)}function draw_270227(l,n){var e=n.x,i=n.y;draw_sprite_240541(l,bottom_img_270074[0],e,i,n.a1,img_dims_270056),draw_sprite_240541(l,middle_img_270073[0],e,i,n.a2,img_dims_270056),draw_sprite_240541(l,top_imgs_270072[0][n.kind][ratio_to_glow_offset_268718(n.glow/60)],e,i,n.a,img_dims_270056)}function draw_284668(l,n){var e=0,i=null!=n?n.length:0;l:for(;e<i;)draw_270227(l,n[e]),e+=1}function cir_edges_271590(l,n,e,i,t){var a=null;a=nimCopy(null,[],NTI271613);var r=0,u=0;return l-e<0?(null!=a?a.push([l+i,n]):a=[[l+i,n]],r=1):i<l+e&&(null!=a?a.push([l-i,n]):a=[[l-i,n]],r=-1),n-e<0?(null!=a?a.push([l,n+t]):a=[[l,n+t]],u=1):t<n+e&&(null!=a?a.push([l,n-t]):a=[[l,n-t]],u=-1),0!=r&&!(0==u)&&(null!=a?a.push([l+r*i,n+u*t]):a=[[l+r*i,n+u*t]]),a}function cir_edges_276298(l,n,e){return nimCopy(null,cir_edges_271590(l.x,l.y,l.r,n,e),NTI266426)}function edges_obj_276293(l){return nimCopy(null,cir_edges_276298(l,800,545.4545454545455),NTI266466)}function draw_276284(l,n){var e=n.x,i=n.y,t=n.a,a=ratio_to_glow_offset_268718(HEX2F_202817(n.life,1500)),r=loot_imgs_276161[0][n.kind][a];draw_sprite_240541(l,r,e,i,t,loot_img_dims_276154);var u,o=new Float64Array(2),s=0,_=null!=(u=edges_obj_276293(n))?u.length:0;l:for(;s<_;)nimCopy(o,u[s],NTI268373),draw_sprite_240541(l,r,o[0],o[1],t,loot_img_dims_276154),s+=1}function draw_284828(l,n){var e=0,i=null!=n?n.length:0;l:for(;e<i;)draw_276284(l,n[e]),e+=1}function draw_282326(l,n){draw_sprite_240541(l,ship_imgs_282162[0][n.kind][ratio_to_glow_offset_268718(n.glow/45)],n.x,n.y,n.a,img_dims_282155)}function draw_285028(l,n){var e=0,i=null!=n?n.length:0;l:for(;e<i;)draw_282326(l,n[e]),e+=1}function cir_edges_273364(l,n,e){return nimCopy(null,cir_edges_271590(l.x,l.y,l.r,n,e),NTI266426)}function edges_obj_273359(l){return nimCopy(null,cir_edges_273364(l,800,545.4545454545455),NTI266466)}function draw_273350(l,n){var e=n.x,i=n.y,t=n.a,a=ratio_to_glow_offset_268718(HEX2F_202817(n.life,50)),r=bullet_imgs_273157[0][n.ring][n.evil][a];draw_sprite_240541(l,r,e,i,t,img_dims_273147);var u,o=new Float64Array(2),s=0,_=null!=(u=edges_obj_273359(n))?u.length:0;l:for(;s<_;)nimCopy(o,u[s],NTI268373),draw_sprite_240541(l,r,o[0],o[1],t,img_dims_273147),s+=1}function draw_285228(l,n){var e=0,i=null!=n?n.length:0;l:for(;e<i;)draw_273350(l,n[e]),e+=1}function draw_274492(l,n){draw_sprite_240541(l,present_imgs_274210[0][n.kind][ratio_to_glow_offset_268718(HEX2F_202817(n.glow,150))],n.x,n.y,n.a,img_dims_274203)}function draw_285449(l,n){var e=0,i=null!=n?n.length:0;l:for(;e<i;)draw_274492(l,n[e]),e+=1}function cir_edges_278467(l,n,e){return nimCopy(null,cir_edges_271590(l.x,l.y,l.r,n,e),NTI266426)}function edges_obj_278462(l){return nimCopy(null,cir_edges_278467(l,800,545.4545454545455),NTI266466)}function draw_278456(l,n){l:do{if(!n.alive)break l;var e=n.a,i=player_imgs_278422[0][ratio_to_glow_offset_268718(n.glow/45)];draw_sprite_240541(l,i,n.x,n.y,e,img_dims_278427);var t,a=new Float64Array(2),r=0,u=null!=(t=edges_obj_278462(n))?t.length:0;n:for(;r<u;)nimCopy(a,t[r],NTI268373),draw_sprite_240541(l,i,a[0],a[1],e,img_dims_278427),r+=1}while(0)}function cir_edges_280068(l,n,e){return nimCopy(null,cir_edges_271590(l.x,l.y,l.r,n,e),NTI266426)}function edges_obj_280063(l){return nimCopy(null,cir_edges_280068(l,800,545.4545454545455),NTI266466)}function draw_280056(l,n){var e=n.a,i=rock_img_dimensions_279212[0][n.size],t=rock_imgs_279194[0][n.shape][n.size][n.mat];draw_sprite_240541(l,t,n.x,n.y,e,i);var a,r=new Float64Array(2),u=0,o=null!=(a=edges_obj_280063(n))?a.length:0;l:for(;u<o;)nimCopy(r,a[u],NTI268373),draw_sprite_240541(l,t,r[0],r[1],e,i),u+=1}function draw_285643(l,n){var e=0,i=null!=n?n.length:0;l:for(;e<i;)draw_280056(l,n[e]),e+=1}function set_transform_240372(l,n,e,i){l.setTransform(i,0,0,i,n*pixel_ratio_240054,e*pixel_ratio_240054)}function draw_sprite_240506(l,n,e,i,t,a,r){set_transform_240372(l,e,i,r),l.rotate(t),l.drawImage(n,-a.cx,-a.cy)}function cir_edges_271582(l,n,e){return nimCopy(null,cir_edges_271590(l.x,l.y,l.r,n,e),NTI266426)}function edges_obj_271577(l){return nimCopy(null,cir_edges_271582(l,800,545.4545454545455),NTI266466)}function clamp_266102(l,n){var e=0;l:do{if(l<0){e=0;break l}if(n<l){e=n;break l}e=l;break l}while(0);return e}function clamp_x_268325(l){return clamp_266102(l,800)}function clamp_y_268342(l){return clamp_266102(l,545.4545454545455)}function draw_271571(l,n){var e=boom_imgs_271139[0][n.kind][n.life],i=n.r/100;switch(n.edge){case 1:draw_sprite_240506(l,e,n.x,n.y,0,img_dims_271134,i);var t,a=new Float64Array(2),r=0,u=null!=(t=edges_obj_271577(n))?t.length:0;l:for(;r<u;)nimCopy(a,t[r],NTI268373),draw_sprite_240506(l,e,a[0],a[1],0,img_dims_271134,i),r+=1;break;case 0:draw_sprite_240506(l,e,clamp_x_268325(n.x),clamp_y_268342(n.y),0,img_dims_271134,i)}}function draw_285828(l,n){var e={x:0,y:0,vx:0,vy:0,a:0,va:0,r:0,life:0,kind:0,edge:0},i=0,t=null!=n?n.length:0;l:for(;i<t;)nimCopy(e,n[i],NTI271111),draw_271571(l,e),i+=1}function draw_277355(l,n){draw_sprite_240541(l,img_canvases_277134[0][n.life],n.x,n.y,0,img_dims_277129)}function draw_286058(l,n){var e=0,i=null!=n?n.length:0;l:for(;e<i;)draw_277355(l,n[e]),e+=1}function draw_284664(l,n){l.save(),draw_284668(l,n.bases),draw_284828(l,n.loots),draw_285028(l,n.ships),draw_285228(l,n.bullets),draw_285228(l,n.bulletsEvil),draw_285449(l,n.hooligans),draw_278456(l,n.player),draw_285643(l,n.rocks),draw_285828(l,n.booms),draw_286058(l,n.particles),l.restore()}function parse_saturated_natural_316231(l,n,e,i){var t=0,a=i;if(a<(null!=l?l.length:0)&&43==l[a]&&(a+=1),a<(null!=l?l.length:0)&&null!=ConstSet6[l[a]]){n[e]=0;l:for(;a<(null!=l?l.length:0)&&null!=ConstSet7[l[a]];){var r=l[a]-48;n[e]<=Math.trunc((2147483647-r)/10)?n[e]=10*n[e]+r:n[e]=2147483647,a+=1;n:for(;a<(null!=l?l.length:0)&&95==l[a];)a+=1}t=a-i}return t}function HEX5BHEX5D_354304(l,n){var e=null,i=n.a,t=(null!=l?l.length:0)-n.b-i+1;e=nimCopy(null,mnewString(t),NTI176040);var a=0,r=0;l:for(;r<t;)e[a=r]=l[a+i],r+=1;return e}function HEX2EHEX2E_354239(l,n){var e={a:0,b:0};return nimCopy(e,{a:l,b:n},NTI354247),e}function add_194638(l,n,e){null===l[n]&&(l[n]=[]);var i=l[n].length;l[n].length+=e.length;for(var t=0;t<e.length;++t)l[n][i+t]=e.charCodeAt(t)}function unhandledException(l){var n=[[]];0!=(null!=l.message?l.message.length:0)?(null!=n[0]?n[0]=n[0].concat(makeNimstrLit("Error: unhandled exception: ")):n[0]=makeNimstrLit("Error: unhandled exception: "),null!=n[0]?n[0]=n[0].concat(l.message):n[0]=l.message.slice()):null!=n[0]?n[0]=n[0].concat(makeNimstrLit("Error: unhandled exception")):n[0]=makeNimstrLit("Error: unhandled exception"),null!=n[0]?n[0]=n[0].concat(makeNimstrLit(" [")):n[0]=makeNimstrLit(" ["),add_194638(n,0,l.name),null!=n[0]?n[0]=n[0].concat(makeNimstrLit("]\n")):n[0]=makeNimstrLit("]\n");var e=toJSStr(n[0]);throw framePtr=null,"undefined"!=typeof Error?new Error(e):e}function parse_standard_format_specifier_412324(l,n,e){var i={fill:0,align:0,sign:0,alternateForm:!1,padWithZero:!1,minimumWidth:0,precision:0,typ:0,endPosition:0,fill:32,align:0,sign:45},t=n;(t+1<(null!=l?l.length:0)&&null!=ConstSet2[l[t+1]]?(i.fill=l[t],i.align=l[t+1],t+=2):t<(null!=l?l.length:0)&&null!=ConstSet3[l[t]]&&(i.align=l[t],t+=1),t<(null!=l?l.length:0)&&null!=ConstSet4[l[t]]&&(i.sign=l[t],t+=1),t<(null!=l?l.length:0)&&35==l[t]&&(i.alternateForm=!0,t+=1),t+1<(null!=l?l.length:0)&&48==l[t]&&null!=ConstSet5[l[t+1]]&&(i.padWithZero=!0,t+=1),(t+=parse_saturated_natural_316231(l,i,"minimumWidth",t))<(null!=l?l.length:0)&&46==l[t])?(t+=1,t+=parse_saturated_natural_316231(l,i,"precision",t)):i.precision=-1;if(t<(null!=l?l.length:0)&&null!=ConstSet8[l[t]]&&(i.typ=l[t],t+=1),i.endPosition=t,t!=(null!=l?l.length:0)&&!e){var a=null;(a={m_type:NTI179452,parent:null,name:null,message:null,trace:null,raiseId:0,up:null}).message=nimCopy(null,(makeNimstrLit("invalid format string, cannot parse: ")||[]).concat(HEX5BHEX5D_354304(l,HEX2EHEX2E_354239(t,1))||[]),NTI176040),a.parent=null,raiseException(a,"ValueError")}return i}function mk_digit_412014(l,n){return nimCopy(null,nimCharToStr(l<10?48+l:(120==n?97:65)+l-10),NTI176040)}function nsuRepeatChar(l,n){var e=null;e=nimCopy(null,mnewString(n),NTI176040);var i;i=n-1;var t=0;l:for(;t<=i;)e[t]=l,t+=1;return e}function format_int_415610(l,n,e){var i=null,t=l,a=t<0;a&&(t*=-1);var r=[];if(e.alternateForm)switch(e.typ){case 88:case 120:r=nimCopy(null,makeNimstrLit("0x"),NTI176040);break;case 98:r=nimCopy(null,makeNimstrLit("0b"),NTI176040);break;case 111:r=nimCopy(null,makeNimstrLit("0o"),NTI176040)}if(0==t)i=nimCopy(null,makeNimstrLit("0"),NTI176040);else{i=nimCopy(null,[],NTI176040);l:for(;0<t;){var u=Math.trunc(t%n);t=Math.trunc(t/n),i=null!=i?i.concat(mk_digit_412014(u,e.typ)):mk_digit_412014(u,e.typ).slice()}var o,s=0;o=Math.trunc((null!=i?i.length:0)/2);var _=0;l:for(;_<o;){var d=i[s=_];i[s]=i[(null!=i?i.length:0)-s-1],i[(null!=i?i.length:0)-s-1]=d,_+=1}}if(e.padWithZero){var c=!!a||!(45==e.sign),f=e.minimumWidth-(null!=i?i.length:0)-(null!=r?r.length:0)-(c?1:0);0<f&&(i=nimCopy(null,(nsuRepeatChar(48,f)||[]).concat(i||[]),NTI176040))}if(i=a?nimCopy(null,(makeNimstrLit("-")||[]).concat(r||[],i||[]),NTI176040):45!=e.sign?nimCopy(null,[e.sign].concat(r||[],i||[]),NTI176040):nimCopy(null,(r||[]).concat(i||[]),NTI176040),60==e.align){var m,p;m=null!=i?i.length:0,p=e.minimumWidth;var k=m;l:for(;k<p;)k,null!=i?addChar(i,e.fill):i=[e.fill],k+=1}else{var h=e.minimumWidth-(null!=i?i.length:0);if(94==e.align){var N=Math.trunc(h/2);i=nimCopy(null,(nsuRepeatChar(e.fill,N)||[]).concat(i||[],nsuRepeatChar(e.fill,h-N)||[]),NTI176040)}else 0<h&&(i=nimCopy(null,(nsuRepeatChar(e.fill,h)||[]).concat(i||[]),NTI176040))}return i}function format_value_415535(l,n,e,i){l:do{if(0==(null!=i?i.length:0)){null!=l[n]?l[n]=l[n].concat(cstrToNimstr(e+"")):l[n]=cstrToNimstr(e+"").slice();break l}var t=parse_standard_format_specifier_412324(i,0,!1),a=10;switch(t.typ){case 120:case 88:a=16;break;case 100:case 0:break;case 98:a=2;break;case 111:a=8;break;default:var r=null;(r={m_type:NTI179452,parent:null,name:null,message:null,trace:null,raiseId:0,up:null}).message=nimCopy(null,(makeNimstrLit("invalid type in format string for number, expected one  of 'x', 'X', 'b', 'd', 'o' but got: ")||[]).concat([t.typ]),NTI176040),r.parent=null,raiseException(r,"ValueError")}null!=l[n]?l[n]=l[n].concat(format_int_415610(e,a,t)):l[n]=format_int_415610(e,a,t).slice()}while(0)}function round_rect_path_415079(l,n,e,i,t,a){var r=n+i,u=e+t;l.beginPath(),l.moveTo(n+a,e),l.lineTo(r-a,e),l.quadraticCurveTo(r,e,r,e+a),l.lineTo(r,e+t-a),l.quadraticCurveTo(r,u,r-a,u),l.lineTo(n+a,u),l.quadraticCurveTo(n,u,n,u-a),l.lineTo(n,e+a),l.quadraticCurveTo(n,e,n+a,e)}function draw_score_415511(l,n){var e=[[]];null!=e?e.push(makeNimstrLit("  Score  ")):e=[makeNimstrLit("  Score  ")];var i=[mnewString(0)];null!=i[0]?i[0]=i[0].concat(makeNimstrLit("Pods   ")):i[0]=makeNimstrLit("Pods   "),format_value_415535(i,0,n.delivered[1],makeNimstrLit(">4"));var t=nimCopy(null,i[0],NTI176040);null!=e?e.push(t):e=[t];var a=[mnewString(0)];null!=a[0]?a[0]=a[0].concat(makeNimstrLit("Gems   ")):a[0]=makeNimstrLit("Gems   "),format_value_415535(a,0,n.delivered[0],makeNimstrLit(">4"));var r=nimCopy(null,a[0],NTI176040);null!=e?e.push(r):e=[r];var u=[mnewString(0)];null!=u[0]?u[0]=u[0].concat(makeNimstrLit("Rocks  ")):u[0]=makeNimstrLit("Rocks  "),format_value_415535(u,0,n.rockScore,makeNimstrLit(">4"));var o=nimCopy(null,u[0],NTI176040);null!=e?e.push(o):e=[o];var s=[mnewString(0)];null!=s[0]?s[0]=s[0].concat(makeNimstrLit("Ships  ")):s[0]=makeNimstrLit("Ships  "),format_value_415535(s,0,n.shipScore,makeNimstrLit(">4"));var _=nimCopy(null,s[0],NTI176040);if(null!=e?e.push(_):e=[_],(0<n.cargo[1]||0<n.cargo[0])&&(null!=e?e.push([]):e=[[]],null!=e?e.push(makeNimstrLit("  Cargo  ")):e=[makeNimstrLit("  Cargo  ")]),0<n.cargo[1]){var d=[mnewString(0)];null!=d[0]?d[0]=d[0].concat(makeNimstrLit("Pods   ")):d[0]=makeNimstrLit("Pods   "),format_value_415535(d,0,n.cargo[1],makeNimstrLit(">4"));var c=nimCopy(null,d[0],NTI176040);null!=e?e.push(c):e=[c]}if(0<n.cargo[0]){var f=[mnewString(0)];null!=f[0]?f[0]=f[0].concat(makeNimstrLit("Gems   ")):f[0]=makeNimstrLit("Gems   "),format_value_415535(f,0,n.cargo[0],makeNimstrLit(">4"));var m=nimCopy(null,f[0],NTI176040);null!=e?e.push(m):e=[m]}if((0<n.player.ringShots||0<n.player.multiShots)&&(null!=e?e.push([]):e=[[]],null!=e?e.push(makeNimstrLit(" Powerup ")):e=[makeNimstrLit(" Powerup ")]),0<n.player.ringShots){var p=[mnewString(0)];null!=p[0]?p[0]=p[0].concat(makeNimstrLit("Ring   ")):p[0]=makeNimstrLit("Ring   "),format_value_415535(p,0,n.player.ringShots,makeNimstrLit(">4"));var k=nimCopy(null,p[0],NTI176040);null!=e?e.push(k):e=[k]}if(0<n.player.multiShots){var h=[mnewString(0)];null!=h[0]?h[0]=h[0].concat(makeNimstrLit("Multi  ")):h[0]=makeNimstrLit("Multi  "),format_value_415535(h,0,n.player.multiShots,makeNimstrLit(">4"));var N=nimCopy(null,h[0],NTI176040);null!=e?e.push(N):e=[N]}var g=[0],y=5+10*(null!=e?e.length:0);l.beginPath(),l.fillStyle="rgba(0,0,50,0.5)",round_rect_path_415079(l,5,5,74,y,8),l.fill(),l.closePath(),l.font="10px Andale Mono",l.fillStyle="#FFFFFF";var v=null,T=0,I=null!=e?e.length:0;l:for(;T<I;)v=e[T],l.fillText(toJSStr(v),42,5+g[0]),HEX2BHEX3D_270186(g,0,10),T+=1}function draw_hi_score_416242(l,n){var e=[[]];null!=e?e.push(makeNimstrLit(" HiScore ")):e=[makeNimstrLit(" HiScore ")];var i=[mnewString(0)];null!=i[0]?i[0]=i[0].concat(makeNimstrLit("Pods   ")):i[0]=makeNimstrLit("Pods   "),format_value_415535(i,0,n[0],makeNimstrLit(">4"));var t=nimCopy(null,i[0],NTI176040);null!=e?e.push(t):e=[t];var a=[mnewString(0)];null!=a[0]?a[0]=a[0].concat(makeNimstrLit("Gems   ")):a[0]=makeNimstrLit("Gems   "),format_value_415535(a,0,n[1],makeNimstrLit(">4"));var r=nimCopy(null,a[0],NTI176040);null!=e?e.push(r):e=[r];var u=[mnewString(0)];null!=u[0]?u[0]=u[0].concat(makeNimstrLit("Rocks  ")):u[0]=makeNimstrLit("Rocks  "),format_value_415535(u,0,n[2],makeNimstrLit(">4"));var o=nimCopy(null,u[0],NTI176040);null!=e?e.push(o):e=[o];var s=[mnewString(0)];null!=s[0]?s[0]=s[0].concat(makeNimstrLit("Ships  ")):s[0]=makeNimstrLit("Ships  "),format_value_415535(s,0,n[3],makeNimstrLit(">4"));var _=nimCopy(null,s[0],NTI176040);null!=e?e.push(_):e=[_];var d=[0],c=5+10*(null!=e?e.length:0);l.beginPath(),l.fillStyle="rgba(0,0,50,0.5)",round_rect_path_415079(l,86,5,74,c,8),l.fill(),l.font="10px Andale Mono",l.fillStyle="#FFFFFF";var f=null,m=0,p=null!=e?e.length:0;l:for(;m<p;)f=e[m],l.fillText(toJSStr(f),123,5+d[0]),HEX2BHEX3D_270186(d,0,10),m+=1}function draw_text_centered_415164(l,n,e,i,t,a){var r=max_188537(6*(null!=i?i.length:0)+8,t),u=max_188537(18,a);l.beginPath(),l.fillStyle="rgba(0,0,50,0.5)",round_rect_path_415079(l,n-.5*r,e-.5*u,r,u,8),l.fill(),l.fillStyle="#FFFFFF",l.fillText(toJSStr(i),n,e)}function draw_instructions_416375(l){draw_text_centered_415164(l,160,439.0909090909091,makeNimstrLit("Bring gems to the station in the lower left."),0,0),draw_text_centered_415164(l,640,166.36363636363637,makeNimstrLit("Bring lifepods to the station in the upper right."),0,0),draw_text_centered_415164(l,400,510.4545454545455,makeNimstrLit("This is your Omega-13 charge.  You can use it to go back in time."),0,0),draw_text_centered_415164(l,400,242.72727272727275,makeNimstrLit("Bust the rocks so ships can travel safely."),0,0),l.font="16px Arial",draw_text_centered_415164(l,400,212.72727272727275,makeNimstrLit("Look out! Space Rocks!"),200,30),l.font="10px Andale Mono",draw_text_centered_415164(l,400,302.72727272727275,makeNimstrLit("Arrow keys move, Space shoots, Enter pauses, Escape restarts."),0,0),draw_text_centered_415164(l,400,322.72727272727275,makeNimstrLit("While paused, press down to save the game."),0,0),draw_text_centered_415164(l,400,342.72727272727275,makeNimstrLit("While paused, press left and right to travel back in time."),0,0)}function get_time_targets_290468(l){var n,e,i={Field0:null,Field1:null},t=nimMax(0,timetarget_289109[0]-5),a=nimMin(timetarget_289109[0]+5,len_289186(l)-1),r=[],u=[],o=0,s=timetarget_289109[0];l:for(;s<=a;)o=s,null!=r?r.push(Flatted.parse((n=HEX5BHEX5D_290379(l,o),n)[0][n[1]])):r=[Flatted.parse((n=HEX5BHEX5D_290379(l,o),n)[0][n[1]])],s+=1;var _=0,d=t;l:for(;d<=timetarget_289109[0];)_=d,null!=u?u.push(Flatted.parse((e=HEX5BHEX5D_290379(l,_),e)[0][e[1]])):u=[Flatted.parse((e=HEX5BHEX5D_290379(l,_),e)[0][e[1]])],d+=1;return nimCopy(i,{Field0:nimCopy(null,r,NTI290514),Field1:nimCopy(null,u,NTI290531)},NTI290472),i}function draw_past_280130(l,n){var e=n.a,i=rock_img_dimensions_279212[0][n.size];draw_sprite_240541(l,rock_past_imgs_279201[0][n.shape][n.size],n.x,n.y,e,i)}function draw_past_282344(l,n){draw_sprite_240541(l,ship_past_img_282163[0],n.x,n.y,n.a,img_dims_282155)}function draw_past_274510(l,n){draw_sprite_240541(l,past_img_274214[0][n.kind],n.x,n.y,n.a,img_dims_274203)}function draw_past_278529(l,n){l:do{if(!n.alive)break l;var e=n.a,i=player_past_img_278423[0];draw_sprite_240541(l,i,n.x,n.y,e,img_dims_278427);var t,a=new Float64Array(2),r=0,u=null!=(t=edges_obj_278462(n))?t.length:0;n:for(;r<u;)nimCopy(a,t[r],NTI268373),draw_sprite_240541(l,i,a[0],a[1],e,img_dims_278427),r+=1}while(0)}function draw_past_286271(l,n){l.save();var e,i=0,t=null!=(e=n.rocks)?e.length:0;l:for(;i<t;)draw_past_280130(l,e[i]),i+=1;var a,r=0,u=null!=(a=n.ships)?a.length:0;l:for(;r<u;)draw_past_282344(l,a[r]),r+=1;var o,s=0,_=null!=(o=n.hooligans)?o.length:0;l:for(;s<_;)draw_past_274510(l,o[s]),s+=1;draw_past_278529(l,n.player),l.restore()}function draw_future_280150(l,n){var e=n.a,i=rock_img_dimensions_279212[0][n.size];draw_sprite_240541(l,rock_future_imgs_279208[0][n.shape][n.size],n.x,n.y,e,i)}function draw_future_282361(l,n){draw_sprite_240541(l,ship_future_img_282164[0],n.x,n.y,n.a,img_dims_282155)}function draw_future_274527(l,n){draw_sprite_240541(l,future_img_274218[0][n.kind],n.x,n.y,n.a,img_dims_274203)}function draw_future_278559(l,n){l:do{if(!n.alive)break l;var e=n.a,i=player_future_img_278424[0];draw_sprite_240541(l,i,n.x,n.y,e,img_dims_278427);var t,a=new Float64Array(2),r=0,u=null!=(t=edges_obj_278462(n))?t.length:0;n:for(;r<u;)nimCopy(a,t[r],NTI268373),draw_sprite_240541(l,i,a[0],a[1],e,img_dims_278427),r+=1}while(0)}function draw_future_286309(l,n){l.save();var e,i=0,t=null!=(e=n.rocks)?e.length:0;l:for(;i<t;)draw_future_280150(l,e[i]),i+=1;var a,r=0,u=null!=(a=n.ships)?a.length:0;l:for(;r<u;)draw_future_282361(l,a[r]),r+=1;var o,s=0,_=null!=(o=n.hooligans)?o.length:0;l:for(;s<_;)draw_future_274527(l,o[s]),s+=1;draw_future_278559(l,n.player),l.restore()}function omega_count_289154(l){return Math.trunc(len_289186(l)/12)}function omega_count_left_289218(l){return Math.trunc((len_289186(l)-timetarget_289109[0])/12)}function draw_290907(l,n){var e;l.font="16px Arial";var i=omega_count_289154(n);e=makeNimstrLit(12<i?"#00FF99":10<i?"#00FF55":8<i?"#00FF00":6<i?"#55FF00":4<i?"#AAFF00":2<i?"#FFFF00":0<i?"#FFAA00":"#FF5555"),l.fillStyle=toJSStr(e),is_now_289123()?l.fillText(toJSStr((makeNimstrLit("-")||[]).concat(cstrToNimstr(i+"")||[])),400,530.4545454545455):l.fillText(toJSStr((makeNimstrLit("-")||[]).concat(cstrToNimstr(i+"")||[],makeNimstrLit(" -> ")||[],cstrToNimstr(omega_count_left_289218(n)+"")||[])),400,530.4545454545455),l.font="10px Andale Mono"}function draw_427958(l){switch(l.ctx.clearRect(0,0,800,545.4545454545455),l.mode){case 0:draw_284664(l.ctx,l.scene),draw_score_415511(l.ctx,l.scene);break;case 1:if(is_now_289123())draw_284664(l.ctx,l.scene),draw_score_415511(l.ctx,l.scene),draw_hi_score_416242(l.ctx,l.hiscore),l.drawHelp&&draw_instructions_416375(l.ctx);else{var n,e,i={Field0:null,Field1:null};nimCopy(i,get_time_targets_290468(l.timeline),NTI290472),n=nimCopy(null,i.Field0,NTI290473),e=nimCopy(null,i.Field1,NTI290475);var t=null,a=0,r=null!=n?n.length:0;l:for(;a<r;)t=n[a],draw_past_286271(l.ctx,t),a+=1;var u=null,o=0,s=null!=e?e.length:0;l:for(;o<s;)u=e[o],draw_future_286309(l.ctx,u),o+=1;draw_284664(l.ctx,l.timetarget),draw_score_415511(l.ctx,l.timetarget)}}draw_290907(l.ctx,l.timeline)}function tick_436682(l,n,e){apply_inputs_434157(l,n),update_427914(l[n],e),draw_427958(l[n])}function HEX3Aanonymous_437027(l){var n=document.getElementById("canvas"),e=document.getElementById("loading"),i=get_context_239052(n);adjust_for_pixelratio_240093(n,800,545.4545454545455),n.style.background='center center / cover no-repeat url("img/stars.jpg")',n.style.borderStyle="solid";var t=[new_game_417088(i)];init_436700(t,0),e.style.width="0px",e.style.height="0px",add_doc_event_listener_230135("keydown",function(l){keydown_428414(t,0,l)},!1),add_doc_event_listener_230135("keyup",function(l){keyup_432537(t,0,l)},!1),raf_dt_230057(function(l){tick_436682(t,0,l)})}window.onload=HEX3Aanonymous_437027;